<Mcml xmlns = "http://schemas.microsoft.com/2008/mcml" xmlns:cor = "assembly://MSCorLib/System" xmlns:audio = "assembly://ehshell/MediaCenter.Audio" xmlns:playback = "assembly://ehshell/Microsoft.MediaCenter.Playback" xmlns:media = "assembly://ehshell/MediaCenter.Media" xmlns:sb = "assembly://ehshell/ServiceBus.UIFramework" xmlns:shell = "assembly://Microsoft.MediaCenter.Shell/Microsoft.MediaCenter.Shell" xmlns:comm = "res://Microsoft.MediaCenter.Shell!Globals.mcml" xmlns:ctl = "res://Microsoft.MediaCenter.Shell!Controls.mcml" xmlns:rating = "res://ehres!Audio.StarRating.mcml" xmlns:me = "Me"><Aggregate Source="res://ehres!PlayStateView.mcml"/><shell:ImageSet Name="CheckBox_Checked" DefaultImageName="Default"><Values><Image Name="Default" Source="res://ehres!NowPlaying.Check.Enabled.png" Flippable="false"/></Values></shell:ImageSet><UI Name="AudioNFNPPage"><Locals><Environment Name="Environment"/><Timer Name="ClockTimer" AutoRepeat="false" Interval="15000" Enabled="true"/><Timer Name="AlbumCoverTimer" AutoRepeat="true" Interval="45000" Enabled="false"/><Timer Name="AlbumCoverChange" AutoRepeat="false" Interval="350" Enabled="false"/><InvokeCommand Name="CopyCDCmd" Description="res://ehres!Audio_CopyCd" Target="[Page.CopyCd]"/><InvokeCommand Name="EjectCDCmd" Description="res://ehres!Audio_EjectCd" Target="[Page.EjectCd]"/><InvokeCommand Name="ViewTracksCmd" Description="res://ehres!Audio_ViewTracks" Target="[Page.ViewTracks]"/><InvokeCommand Name="VisualizeCmd" Description="res://ehres!Audio_Visualizations" Target="[Page.Visualize]"/><InvokeCommand Name="SlideShowCmd" Description="res://ehres!Audio_SlideShow" Target="[Page.PlaySlideShow]"/><shell:ThumbnailCommand Name="ShuffleCmd" Description="res://ehres!Audio_Shuffle" Image="global://me:CheckBox_Checked"/><shell:ThumbnailCommand Name="RepeatCmd" Description="res://ehres!Audio_Repeat" Image="global://me:CheckBox_Checked"/><InvokeCommand Name="BuyMusicCmd" Description="res://ehres!Audio_BuyNow" Target="[Page.BuyNow]"/><playback:MediaMonitor Name="MediaMonitor"/><cor:Boolean Name="CanShowCommandSet" Boolean="true"/><AnchorEdge Name="SafeTop" Id="Parent" Percent="0"/><AnchorEdge Name="SafeLeft" Id="Parent" Percent="0"/><AnchorEdge Name="SafeBottom" Id="Parent" Percent="1"/><AnchorEdge Name="SafeRight" Id="Parent" Percent="1"/><shell:ShellData Name="ShellData"/><cor:TimeSpan Name="DurationMarker"/><ScrollingHandler Name="ScrollingHandler" HandlerStage="Bubbled"/><ScrollingData Name="ScrollingData" /></Locals><Properties><playback:MediaNavigator Name="Nav" MediaNavigator="$Required"/><sb:AudioShimModel Name="Model" AudioShimModel="$Required"/><sb:AudioShimTransportControl Name="TransportControl" AudioShimTransportControl="$Required"/><audio:NewAudioNowPlayingPage Name="Page" NewAudioNowPlayingPage="$Required"/><Command Name="AnyKeyCmd" Command="$Required"/><AnchorLayoutInput Name="AlbumCoverHome" Top="Parent,0,170" Left="Parent,0,314"/><AnchorLayoutInput Name="AlbumDetailsRightLayout" Right="AlbumCover,0,-47" Vertical="Center"/><AnchorLayoutInput Name="AlbumDetailsLeftLayout" Left="AlbumCover,1,53" Vertical="Center"/><AnchorLayoutInput Name="GradientRight" Top="AlbumCover,0,-120" Bottom="AlbumCover,1,120" Left="AlbumCover,.5" Right="Parent,1,150"/><AnchorLayoutInput Name="GradientLeft" Top="AlbumCover,0,-120" Bottom="AlbumCover,1,120" Left="Parent,0,-150" Right="AlbumCover,.5"/><FlowLayout Name="TextLeft" Orientation="Vertical" ItemAlignment="Near" StripAlignment="Center" FillStrip="true"/><FlowLayout Name="TextRight" Orientation="Vertical" ItemAlignment="Far" StripAlignment="Center" FillStrip="true"/><AnchorLayoutInput Name="NowPlayingLeft" Top="Parent,0,170" Right="Parent, 1,-200"/><AnchorLayoutInput Name="NowPlayingRight" Top="Parent,0,170" Left="Parent, 0, 200"/><DockLayoutInput Name="CheckedIconLayout" Position="Right" Alignment="Center"/><Font Name="PrimaryFont" FontName="global://comm:MainFontFace" FontSize="21"/><Font Name="SecondaryFont" FontName="global://comm:MainFontFace" FontSize="18"/><Font Name="TertiaryFont" FontName="global://comm:RegularFontFace" FontSize="18"/><Font Name="QuaternaryFont" FontName="global://comm:RegularFontFace" FontSize="21"/><Font Name="PrimaryFontLarge" FontName="global://comm:MainFontFace" FontSize="28"/><Font Name="SecondaryFontLarge" FontName="global://comm:MainFontFace" FontSize="24"/><Font Name="TertiaryFontLarge" FontName="global://comm:RegularFontFace" FontSize="20"/><Color Name="PrimaryColor" Color="color://comm:OffWhite"/><Color Name="SecondaryColor" Color="color://comm:LightBlue"/><Color Name="TitleColor" Color="color://comm:MediumBlue"/><cor:String String="res://ehres!Audio_TrackTime" Name="TrackTime"/><cor:String String="res://ehres!Audio_NowPlayingTitle" Name="AudioNowPlayingText"/><Inset Name="CheckedIconPadding" Inset="0, 0, 10, 0"/><cor:Boolean Name="AnimatedMode" Boolean="False"/><cor:Boolean Name="CommandMode" Boolean="False"/><cor:Boolean Name="IsAlbumOnLeft" Boolean="True"/><BooleanChoice Name="MetadataNearAligned" Value="True"/><Image Name="LeftNavBackground" Source="res://ehres!NowPlaying.Music.LeftMenu.Gradient.png" Flippable="true" /><Image Name="AlbumCoverShadow" Source="res://ehres!NowPlaying.Music.Album.DropShadow.png" Flippable="true" /><Image Name="MetadataGradient" Source="res://ehres!NowPlaying.Music.Meta.Gradient.png" Flippable="true"/><Vector3 Name="NowPlayingScale" X="1" Y="1" Z="1" /><Vector3 Name="MenuScale" X="0.76" Y="0.76" Z="1" /></Properties><Rules><Default Target="[Page.MetadataCycleDelay]" Value="11000" /><Binding Source="[Nav]" Target="[MediaMonitor.MediaNavigator]" /><Binding Target="[SafeTop.Offset]" Source="[ShellData.OverscanMargins.Top]"/><Binding Target="[SafeLeft.Offset]" Source="[ShellData.OverscanMargins.Left]"/><Binding Target="[SafeRight.Offset]" Source="[ShellData.OverscanMargins.Right]"/><Binding Target="[SafeBottom.Offset]" Source="[ShellData.OverscanMargins.Bottom]"/><Binding Source="[Nav.MediaItemToPlay]" Target="[Nav.LoadedMediaItemToPlay]"><Conditions><IsValid Source="[Nav.MediaItemToPlay]"/><IsType Source="[Nav.MediaItemToPlay]" Type="sb:AudioMediaModelItem"/></Conditions></Binding><Binding Source="[Nav.TransportController!sb:AudioShimTransportControl]" Target="[Nav.Model!sb:AudioShimModel.TransportControl]"><Conditions><IsValid Source="[Nav.Model]"/><IsType Source="[Nav.Model]" Type="sb:AudioShimModel"/><IsValid Source="[Nav.TransportController]"/><IsType Source="[Nav.TransportController]" Type="sb:AudioShimTransportControl"/></Conditions></Binding><Binding Source="[Model.IsCDPlaying]" Target="[CopyCD.Visible]"><Conditions><IsValid Source="[Model]"/></Conditions></Binding><Binding Source="[Model.IsCDPlaying]" Target="[EjectCD.Visible]"><Conditions><IsValid Source="[Model]"/></Conditions></Binding><Binding Source="[Model.IsWmpVizAllowed]" Target="[Visualize.Visible]"><Conditions><IsValid Source="[Model]"/></Conditions></Binding><Binding Source="[Page.IsBuyMusicAvailable]" Target="[BuyMusic.Visible]"><Conditions><IsValid Source="[Page]"/></Conditions></Binding><Rule><Conditions><IsValid Source="[Model]"/><Modified Source="[Model.Shuffle]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[Shuffle.ShowIcon]" Value="[Model.Shuffle]"/></Actions></Rule><Rule><Conditions><IsValid Source="[Model]"/><Modified Source="[Model.Repeat]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[Repeat.ShowIcon]" Value="[Model.Repeat]"/></Actions></Rule><Rule><Conditions><IsValid Source="[Model]"/><Equality Source="[Model.SlideshowPlayer]" Value="null"/></Conditions><Actions><Set Target="[SlideShowCmd.Description]" Value="res://ehres!Audio_SlideShow"/></Actions></Rule><Default Target="[SlideShowCmd.Description]" Value="res://ehres!Audio_ResumeSlideShow"/><Changed Source="[ShuffleCmd.Invoked]"><Actions><Invoke Target="[Page.ShuffleClick]"/></Actions></Changed><Changed Source="[RepeatCmd.Invoked]"><Actions><Invoke Target="[Page.RepeatClick]"/></Actions></Changed><Condition ConditionOp="ChangedTo" Source="[AnimatedMode]" SourceValue="False"><Actions><Invoke Target="[AlbumDetails.AttachAnimation]" animation="animation://me:AlbumDetails.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[AlbumCover.Scale]" Value="[MenuScale]" /><Set Target="[AlbumCover.LayoutInput]" Value="[AlbumCoverHome]" /><Set Target="[AlbumDetails.LayoutInput]" Value="[AlbumDetailsLeftLayout]"/><Set Target="[AlbumDetailsLeftLayout.Left.Offset]" Value="-23"/><Set Target="[MetadataNearAligned.Value]" Value="True"/><Set Target="[CommandMode]" Value="True"/></Actions></Condition><Default Target="[AlbumDetailsLeftLayout.Left.Offset]" Value="47" /><Condition ConditionOp="ChangedTo" Source="[AnimatedMode]" SourceValue="True"><Actions><Invoke Target="[AlbumDetails.AttachAnimation]" animation="animation://me:AlbumDetails.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[AlbumCover.Scale]" Value="[NowPlayingScale]"/><Set Target="[AlbumDetails.Layout]" Value="[TextRight]"/><Set Target="[AlbumDetails.LayoutInput]" Value="[AlbumDetailsRightLayout]" /><Set Target="[AlbumCover.LayoutInput]" Value="[NowPlayingLeft]" /><Set Target="[MetadataGradientContainer.LayoutInput]" Value="[GradientLeft]" /><Set Target="[TrackTitle.Font]" Value="[PrimaryFontLarge]"/><Set Target="[ArtistTitle.Font]" Value="[SecondaryFontLarge]"/><Set Target="[AlbumTitle.Font]" Value="[SecondaryFontLarge]"/><Set Target="[Position.Font]" Value="[PrimaryFontLarge]"/><Set Target="[ArtistTitle.HorizontalAlignment]" Value="Far"/><Set Target="[AlbumTitle.HorizontalAlignment]" Value="Far"/><Set Target="[TrackTitle.HorizontalAlignment]" Value="Far"/><Set Target="[MetadataNearAligned.Value]" Value="False"/><Set Target="[CommandMode]" Value="False"/></Actions></Condition><Condition ConditionOp="ChangedTo" Source="[IsAlbumOnLeft]" SourceValue="False"><Actions><Invoke Target="[AlbumDetails.AttachAnimation]" animation="animation://me:AlbumDetails.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[AlbumDetails.Layout]" Value="[TextLeft]"/><Set Target="[AlbumDetails.LayoutInput]" Value="[AlbumDetailsLeftLayout]" /><Set Target="[AlbumCover.LayoutInput]" Value="[NowPlayingRight]" /><Set Target="[MetadataGradientContainer.LayoutInput]" Value="[GradientRight]" /><Set Target="[MetadataNearAligned.Value]" Value="True"/></Actions></Condition><Condition ConditionOp="ChangedTo" Source="[IsAlbumOnLeft]" SourceValue="True"><Actions><Invoke Target="[AlbumDetails.AttachAnimation]" animation="animation://me:AlbumDetails.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[AlbumDetails.Layout]" Value="[TextRight]"/><Set Target="[AlbumDetails.LayoutInput]" Value="[AlbumDetailsRightLayout]" /><Set Target="[AlbumCover.LayoutInput]" Value="[NowPlayingLeft]" /><Set Target="[MetadataGradientContainer.LayoutInput]" Value="[GradientLeft]" /><Set Target="[ArtistTitle.HorizontalAlignment]" Value="Far"/><Set Target="[AlbumTitle.HorizontalAlignment]" Value="Far"/><Set Target="[TrackTitle.HorizontalAlignment]" Value="Far"/><Set Target="[MetadataNearAligned.Value]" Value="False"/></Actions></Condition><Condition Source="[Environment.Is2DAnimationExperience]" SourceValue="true"><Actions><Invoke Target="[AlbumCover.AttachAnimation]" animation="animation://me:NowPlaying.Move.GDI" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Condition><Binding Source="[AnimatedMode]" Target="[Page.AnimatedMode]"/><Rule><Conditions><Equality Source="[Environment.IsMouseActive]" Value="True"/></Conditions><Actions><Set Target="[AnimatedMode]" Value="False" ExclusiveApply="false"/><Set Target="[ClockTimer.Enabled]" Value="False"/></Actions></Rule><Rule><Conditions><Equality Source="[Environment.IsMouseActive]" Value="False" /></Conditions><Actions><Set Target="[ClockTimer.Enabled]" Value="True" /><Invoke Target="[ClockTimer.Start]" InvokePolicy="AsynchronousLowPri"/></Actions></Rule><Rule><Conditions><Equality Source="[Environment.IsWidescreen]" Value="False" /></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[NowPlayingLeft.Right.Offset]" Value="-130"/><Set Target="[NowPlayingRight.Left.Offset]" Value="130"/><Set Target="[AlbumDetails.MaximumSize]" Value="400,0"/></Actions></Rule><Changed Source="[AnyKeyCmd.Invoked]"><Actions><Set Target="[AnimatedMode]" Value="False" ExclusiveApply="false"/><Set Target="[ClockTimer.Enabled]" Value="True" ExclusiveApply="false"/><Invoke Target="[ClockTimer.Start]" InvokePolicy="AsynchronousLowPri" ExclusiveApply="false"/><Invoke Target="[CommandSet.NavigateInto]" ExclusiveApply="false"/><Invoke Target="[LeftNavGradient.NavigateInto]" ExclusiveApply="false"/></Actions></Changed><Changed Source="[ClockTimer.Tick]"><Actions><Set Target="[AnimatedMode]" Value="True" ExclusiveApply="false"/></Actions></Changed><Changed Source="[AlbumCoverTimer.Tick]"><Actions><Set Target="[IsAlbumOnLeft]" Value="[IsAlbumOnLeft]"><Transformer><BooleanTransformer Inverse="true"/></Transformer></Set></Actions></Changed><Rule><Conditions><IsValid Source="[Nav.ResolvedMediaItem]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[CanShowCommandSet]" Value="false"/><Set Target="[CommandSet.Visible]" Value="false"/><Set Target="[LeftNavGradient.Visible]" Value="false"/></Actions></Rule><Rule><Conditions><IsValid Source="[Nav.ResolvedMediaItem]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioShimMediaItem"/><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[CanShowCommandSet]" Value="true"/><Set Target="[CommandSet.Visible]" Value="[AnimatedMode]"/><Set Target="[LeftNavGradient.Visible]" Value="[AnimatedMode]"/></Actions></Rule><Binding Source="[AnimatedMode]" Target="[CommandSet.Visible]"><Conditions><Equality Source="[CanShowCommandSet]" Value="true"/></Conditions><Transformer><BooleanTransformer Inverse="true"/></Transformer></Binding><Binding Source="[AnimatedMode]" Target="[LeftNavGradient.Visible]"><Conditions><Equality Source="[CanShowCommandSet]" Value="true"/></Conditions><Transformer><BooleanTransformer Inverse="true"/></Transformer></Binding><Binding Source="[AnimatedMode]" Target="[AlbumCoverTimer.Enabled]"/><Rule><Conditions><IsValid Source="[Nav.ResolvedMediaItem]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[ArtistTitle.Content]" Value="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.Artist]"/><Set Target="[TrackTitle.Content]" Value="[MediaMonitor.MediaItemTitle]"/><Set Target="[AlbumTitle.Content]" Value="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.AlbumTitle]"/></Actions></Rule><Rule><Conditions><IsValid Source="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.AlbumTitle]" /><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/><Equality Source="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.AlbumTitle]" ConditionOp="Equals" Value="res://ehres!MediaLibrary_UnknownAlbum"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[AlbumTitle.Visible]" Value="False"/></Actions></Rule><Rule><Conditions><IsValid Source="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.AlbumTitle]" /><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/><Equality Source="[Nav.ResolvedMediaItem!sb:IMusicItemMetadata.AlbumTitle]" ConditionOp="NotEquals" Value="res://ehres!MediaLibrary_UnknownAlbum"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[AlbumTitle.Visible]" Value="True"/></Actions></Rule><Changed Source="[Page.AlbumChanged]"><Conditions><Equality Source="[CommandMode]" ConditionOp="Equals" Value="True"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Changed Source="[Page.AlbumChanged]"><Conditions><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><IsValid Source="[MediaMonitor]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[MediaMonitor.AlbumCover]"/></Actions></Changed><Changed Source="[Page.AlbumChanged]"><Conditions><Equality Source="[Page.IsNaturalTrackChange]" Value="False"/><Equality Source="[AlbumCoverChange.Enabled]" Value="False"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Changed Source="[Page.AlbumChanged]"><Conditions><Equality Source="[CommandMode]" Value="False"/><Equality Source="[MetadataNearAligned.Value]" Value="False"/><Equality Source="[Page.IsNaturalTrackChange]" Value="True"/><IsValid Source="[Nav.ResolvedMediaItem]" /><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/></Conditions><Actions><Invoke Target="[AlbumCoverChange.Start]"/><Set Target="[AlbumCover.CenterPointPercent]" Value="0,0.5,0"/><PlayAnimation Animation="animation://me:AlbumCoverTransition.Scale" Target="[AlbumCover]"/><Set Target="[Page.IsNaturalTrackChange]" Value="false" /></Actions></Changed><Changed Source="[Page.AlbumChanged]"><Conditions><Equality Source="[CommandMode]" Value="False"/><Equality Source="[MetadataNearAligned.Value]" Value="True"/><Equality Source="[Page.IsNaturalTrackChange]" Value="True"/><IsValid Source="[Nav.ResolvedMediaItem]" /><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/></Conditions><Actions><Invoke Target="[AlbumCoverChange.Start]"/><Set Target="[AlbumCover.CenterPointPercent]" Value="1,0.5,0"/><PlayAnimation Animation="animation://me:AlbumCoverTransition.Scale" Target="[AlbumCover]"/><Set Target="[Page.IsNaturalTrackChange]" Value="false" /></Actions></Changed><Changed Source="[AlbumCoverChange.Tick]"><Conditions><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem]"/></Conditions><Actions><Set Target="[AlbumCoverChange.Enabled]" Value="False"/><Invoke Target="[AlbumCoverTimer.Start]"/><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Changed Source="[Page.AlbumArtUpdated]"><Conditions><Equality Source="[AlbumCoverChange.Enabled]" Value="False"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Changed Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InitialEvaluate="true"><Conditions><Equality Source="[AlbumCover.Content]" Value="null" /><Equality Source="[AlbumCoverChange.Enabled]" Value="False"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Rule><Conditions><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.InnerMedia]"/><Equality Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.InnerMedia.IsOnCdrom]" Value="True"/><IsValid Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]"/><Modified Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InitialEvaluate="True"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Rule><Changed Source="[MediaMonitor.AlbumCover]" InitialEvaluate="true"><Conditions><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><IsValid Source="[MediaMonitor.AlbumCover]"/></Conditions><Actions><Set Target="[AlbumCover.Content]" Value="[MediaMonitor.AlbumCover]" InvokePolicy="Synchronous" ExclusiveApply="true"/></Actions></Changed><Rule><Conditions><Modified Source="[AlbumCover.Content]" InitialEvaluate="true" /><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><Equality Source="[Nav.ResolvedMediaItem!sb:AudioMediaModelItem.IsDefaultAlbumCoverImage]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[MusicalNoteOverlay.Visible]" Value="true" ExclusiveApply="true" /></Actions></Rule><Rule><Conditions><Modified Source="[AlbumCover.Content]" InitialEvaluate="true" /><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><Equality Source="[MediaMonitor.IsDefaultAlbumCoverImage]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[MusicalNoteOverlay.Visible]" Value="true" ExclusiveApply="true" /></Actions></Rule><Default Target="[MusicalNoteOverlay.Visible]" Value="false" /><Rule><Conditions><IsValid Source="[Nav.TransportController.Position]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><Modified Source="[Nav.TransportController.Position]" InitialEvaluate="true"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[Position.Content]" Value="[Nav.TransportController.Position]"><Transformer><TimeSpanTransformer Format="Abbreviate"/></Transformer></Set></Actions></Rule><Rule><Conditions><IsValid Source="[Nav.TransportController.Position]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><Modified Source="[Nav.ResolvedMediaItem]" InitialEvaluate="true"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[Position.Content]" Value="[Nav.TransportController.Position]"><Transformer><TimeSpanTransformer Format="Abbreviate"/></Transformer></Set></Actions></Rule><Rule><Conditions><IsValid Source="[Nav.TransportController.Position]"/><IsType Source="[Nav.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><Modified Source="[Nav.TransportController.Position]" InitialEvaluate="true"/></Conditions><Actions><Invoke Target="[AlbumDetails.DetachAnimation]" type="Move" InvokePolicy="Synchronous" ExclusiveApply="false" /><Set Target="[Position.Content]" Value="[Nav.TransportController.Position]"><Transformer><TimeSpanTransformer Format="Abbreviate"/></Transformer></Set></Actions></Rule><Changed Source="[AlbumCover.Content]" InitialEvaluate="true"><Conditions><IsValid Source="[AlbumCover.Content]" /></Conditions><Actions><Set Target="[AlbumCoverShadowGraphic.Visible]" Value="true" /></Actions></Changed><Changed Source="[AlbumCover.Content]" InitialEvaluate="true"><Conditions><Equality Source="[AlbumCover.Content]" ConditionOp="Equals" Value="null" /></Conditions><Actions><Set Target="[AlbumCoverShadowGraphic.Visible]" Value="false" /></Actions></Changed></Rules><Content><Panel Name="MusicNowPlayingForm" Layout="Form"><Children><Panel Name="MainPanel"><Layout><AnchorLayout SizeToHorizontalChildren="false" SizeToVerticalChildren="false"/></Layout><LayoutInput><FormLayoutInput Top="[SafeTop]" Left="[SafeLeft]" Right="[SafeRight]" Bottom="[SafeBottom]" Vertical="Center" Horizontal="Center"/></LayoutInput><Children><Panel Name="TouchPanel" TouchInteractive="true"><LayoutInput><AnchorLayoutInput Left="Parent,0" Right="Parent,1" Top="Parent,0,70" Bottom="Parent,1,-70"/></LayoutInput></Panel><Panel Name="CommandSet" Navigation="RememberFocus"><Layout><FlowLayout Spacing="4,0" Orientation="Vertical"/></Layout><LayoutInput><AnchorLayoutInput Top="Parent,0,200" Left="Parent,0,42"/></LayoutInput><Children><ctl:Button Model="[CopyCDCmd]" Name="CopyCD" IsNavigatingCommand="true"/><ctl:Button Model="[EjectCDCmd]" Name="EjectCD" IsNavigatingCommand="false"/><ctl:Button Model="[ViewTracksCmd]" Name="ViewTracks" IsNavigatingCommand="true"/><ctl:Button Model="[VisualizeCmd]" Name="Visualize" IsNavigatingCommand="true"/><ctl:Button Model="[SlideShowCmd]" Name="SlideShow" IsNavigatingCommand="true"/><ctl:Button Model="[ShuffleCmd]" Name="Shuffle" IsNavigatingCommand="false" IconBorderInput="[CheckedIconLayout]" IconPadding="[CheckedIconPadding]"/><ctl:Button Model="[RepeatCmd]" Name="Repeat" IsNavigatingCommand="false" IconBorderInput="[CheckedIconLayout]" IconPadding="[CheckedIconPadding]"/><ctl:Button Model="[BuyMusicCmd]" Name="BuyMusic" IsNavigatingCommand="true"/></Children><Animations><Animation Animation="animation://me:Commands.Hide" /><Animation Animation="animation://me:Commands.Show" /></Animations></Panel><Graphic Name="AlbumCover" Layout="Anchor" LayoutInput="[AlbumCoverHome]" MaintainAspectRatio="true" MinimumSize="398,406" MaximumSize="398,406" Padding="-60,-60,-60,-60" CenterPointPercent=".5,.5,0"><Children><me:AudioPlayState Name="PlayStateImage" Model="[TransportControl]"><LayoutInput><AnchorLayoutInput Right="Parent,1,-80" Bottom="Parent,1,-80" ContributesToHeight="false" ContributesToWidth="false"/></LayoutInput></me:AudioPlayState><Graphic Name="AlbumCoverShadowGraphic" Content="[AlbumCoverShadow]"/><Graphic Name="MusicalNoteOverlay" Content="res://ehres!Browse.Audio.NoImage.png" /></Children><Animations><Animation Animation="animation://me:AlbumCover.Show"/><Animation Animation="animation://me:NowPlaying.Move" /></Animations></Graphic><Panel Name="AlbumDetails" MaximumSize="650,0" MinimumSize="320,450" CenterPointPercent="0,1,0" Margins="0,-20,0,0"><Layout><FlowLayout Spacing="8,0" Orientation="Vertical" StripAlignment="Center"/></Layout><Children><ctl:StaticText Name="AlbumURL" Font="[PrimaryFont]" Color="[PrimaryColor]" MaximumSize="480,0" MaximumLines="2" WordWrap="true" HorizontalAlignment="Near"/><ctl:StaticText Name="TrackTitle" AccessibilityName="res://ehres!Acc_Name_Audio_NowPlaying_TrackTitle" Font="[PrimaryFont]" Color="[PrimaryColor]" MaximumSize="480,0" MaximumLines="2" WordWrap="true" HorizontalAlignment="Near"/><ctl:StaticText Name="ArtistTitle" AccessibilityName="res://ehres!Acc_Name_Audio_NowPlaying_ArtistTitle" Font="[SecondaryFont]" Color="[PrimaryColor]" MaximumSize="480,0" MaximumLines="2" WordWrap="true" HorizontalAlignment="Near"/><ctl:StaticText Name="AlbumTitle" AccessibilityName="res://ehres!Acc_Name_Audio_NowPlaying_AlbumTitle" Font="[SecondaryFont]" Color="[PrimaryColor]" MaximumSize="480,0" MaximumLines="2" WordWrap="true" HorizontalAlignment="Near"/><ctl:StaticText Name="Position" AccessibilityName="res://ehres!Acc_Name_Audio_NowPlaying_Position" Font="[PrimaryFont]" Color="[SecondaryColor]" HorizontalAlignment="Near"/><me:CyclingMetadata Name="CyclingMetadata" DataSource="[Page.CyclingMetadata]" AccDataSource="[Page.CyclingMetadataAccName]" Rating="[Page.ItemRatingValue]" MetadataNearAligned="[MetadataNearAligned]"/></Children><Animations><Animation Animation="animation://me:AlbumDetails.Move" /><Animation Animation="animation://me:AlbumDetails.Show" /></Animations></Panel><Graphic Name="MetadataGradientContainer" Content="[MetadataGradient]" LayoutInput="[GradientRight]" CenterPointPercent="0,.3,1"><Animations><Animation Animation="animation://me:MetadataGradient.Show" /><Animation Animation="animation://me:MetadataGradient.Size" /><Animation Animation="animation://me:MetadataGradient.Move" /></Animations></Graphic></Children></Panel><Graphic Name="LeftNavGradient" Content="[LeftNavBackground]" SizingPolicy="SizeToContent"><LayoutInput><AnchorLayoutInput Left="Parent,0,-120" Top="Parent,0,-120" Bottom="Parent,1,120" Right="Parent,0,410"/></LayoutInput><Animations><Animation Animation="animation://me:Commands.Show" /><Animation Animation="animation://me:Commands.Hide" /></Animations></Graphic></Children></Panel></Content></UI><UI Name="CyclingMetadata"><Properties><Choice Name="DataSource" Choice="$Required" /><Choice Name="AccDataSource" Choice="$Required" /><IntRangedValue Name="Rating" IntRangedValue="$Required" /><BooleanChoice Name="MetadataNearAligned" BooleanChoice="$Required"/><FlowLayout Name="FloatLeft" StripAlignment="Near"/><FlowLayout Name="FloatRight" StripAlignment="Far"/></Properties><Rules><Changed Source="[DataSource.Chosen]" InitialEvaluate="true"><Conditions><IsValid Source="[DataSource.Chosen]"/><IsType Source="[DataSource.Chosen]" Type="IntRangedValue"/></Conditions><Actions><Set Target="[StarRating.Rating.Value]" Value="[DataSource.Chosen!IntRangedValue.Value]" /><Set Target="[StarRating.Visible]" Value="true" /></Actions></Changed><Default Target="[StarRating.Visible]" Value="false" /><Rule><Conditions><IsValid Source="[Rating]" /><Modified Source="[Rating.Value]" InitialEvaluate="true" /></Conditions><Actions><Set Target="[StarRating.Rating.Value]" Value="[Rating.Value]" /></Actions></Rule><Changed Source="[DataSource.Chosen]" InitialEvaluate="true"><Conditions><IsValid Source="[DataSource.Chosen]"/><IsType Source="[DataSource.Chosen]" Type="cor:String"/></Conditions><Actions><Set Target="[TextItem.Content]" Value="[DataSource.Chosen!cor:String]" /><Set Target="[TextItem.AccName]" Value="[AccDataSource.Chosen!cor:String]" /><Set Target="[TextItem.Visible]" Value="true" /></Actions></Changed><Default Target="[TextItem.Visible]" Value="false" /><Condition Source="[MetadataNearAligned.Value]" SourceValue="False"><Actions><Set Target="[StarRating.Layout]" Value="[FloatRight]" InvokePolicy="Synchronous"/></Actions></Condition></Rules><Content><Clip FadeSize="6" FadeAmount="1" Layout="VerticalFlow" MaximumSize="0,36" MinimumSize="0,36" Orientation="Vertical"><Children><me:SelectableText Name="TextItem" Content="" AccName="" MetadataNearAligned="[MetadataNearAligned]" MinimumSize="320,0" MaximumSize="320,0"><Animations><Animation Animation="animation://me:CycleShow" /><Animation Animation="animation://me:CycleHide" /></Animations></me:SelectableText><rating:ClickableStarRating Name="StarRating" Rating="[Rating]" Shadowed="false" Margins="0,5,0,5" MinimumSize="320,0" MaximumSize="320,0" Layout="[FloatLeft]"><Animations><Animation Animation="animation://me:CycleShow" /><Animation Animation="animation://me:CycleHide" /></Animations></rating:ClickableStarRating></Children></Clip></Content></UI><Animation Type="Show" Name="CycleShow" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,-30,0"/><PositionKeyframe Time="1.0" Value="0,0,0"/></Keyframes></Animation><Animation Type="Hide" Name="CycleHide" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,0,0" RelativeTo="Current"/><PositionKeyframe Time="1.0" Value="0,30,0"/></Keyframes></Animation><UI Name="SelectableText"><Properties><cor:String Name="Content" String="$Required" /><cor:String Name="AccName" String="$Required" /><Font Name="TertiaryFont" FontName="global://comm:RegularFontFace" FontSize="18"/><Color Name="SecondaryColor" Color="color://comm:LightBlue"/><BooleanChoice Name="MetadataNearAligned" BooleanChoice="$Required"/><HorizontalAlignment Name="HorizontalAlignment" HorizontalAlignment="Near"/></Properties><Rules><Binding Source="[Content]" Target="[SecondaryMetadata.Content]"><Actions><Invoke Target="[SecondaryMetadata.ForceContentChange]"/></Actions></Binding><Binding Source="[AccName]" Target="[SecondaryMetadata.AccessibilityName]"/><Changed InitialEvaluate="true" Source="[MetadataNearAligned.Value]"><Conditions><Equality Source="[MetadataNearAligned.Value]" Value="True"/></Conditions><Actions><Set Target="[SecondaryMetadata.HorizontalAlignment]" Value="Near"/></Actions></Changed><Changed InitialEvaluate="true" Source="[MetadataNearAligned.Value]"><Conditions><Equality Source="[MetadataNearAligned.Value]" Value="False"/></Conditions><Actions><Set Target="[SecondaryMetadata.HorizontalAlignment]" Value="Far"/></Actions></Changed></Rules><Content><ctl:StaticText Content="[Content]" HorizontalAlignment="[HorizontalAlignment]" Name="SecondaryMetadata" AccessibilityName="res://ehres!Acc_Name_Audio_NowPlaying_TrackTitle" Visible="true" Font="[TertiaryFont]" Color="[SecondaryColor]"><Animations><Animation Animation="animation://me:ShowMetaData.ContentChangeShow" /><Animation Animation="animation://me:HideMetaData.ContentChangeHide" /><Animation Animation="animation://me:ShowMetaData.Show" /><Animation Animation="animation://me:HideMetaData.Hide" /></Animations></ctl:StaticText></Content></UI><Animation Name="MetadataGradient.Show" Type="Show" Intensity="Intensive"><Keyframes><ScaleKeyframe Time="0.0" Value="0.0, 0.0, 0.0" RelativeTo="Absolute"/><ScaleKeyframe Time="0.4" Value="1, 1, 1" RelativeTo="Absolute"/><PositionKeyframe Time="0.0" Value="-200,0,0" Interpolation="SCurve, 1.0"/><PositionKeyframe Time="1.0" Value="0,0,0" RelativeTo="Final"/><AlphaKeyframe Time="0.0" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="0.3" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="1.0" Value="1" RelativeTo="Final" Interpolation="Cosine" /></Keyframes></Animation><Animation Name="MetadataGradient.Size" Type="Size"><Keyframes><SizeKeyframe Time="0.0" Value="0,0,0" RelativeTo="Current" Interpolation="SCurve"/><SizeKeyframe Time="1.5" Value="0,0,0" RelativeTo="Final"/></Keyframes></Animation><Animation Name="MetadataGradient.Move" Type="Move"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><PositionKeyframe Time="1.5" RelativeTo="Final"/><ScaleKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><ScaleKeyframe Time="1.5" RelativeTo="Final"/></Keyframes></Animation><Animation Name="ShowMetaData.ContentChangeShow" Type="ContentChangeShow" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,-30,0"/><PositionKeyframe Time="1.0" Value="0,0,0"/></Keyframes></Animation><Animation Name="HideMetaData.ContentChangeHide" Type="ContentChangeHide" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,0,0" RelativeTo="Current"/><PositionKeyframe Time="1.0" Value="0,30,0"/></Keyframes></Animation><Animation Name="ShowMetaData.Show" Type="Show" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,-30,0"/><PositionKeyframe Time="1.0" Value="0,0,0"/></Keyframes></Animation><Animation Name="HideMetaData.Hide" Type="Hide" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="0,0,0" RelativeTo="Current"/><PositionKeyframe Time="1.0" Value="0,30,0"/></Keyframes></Animation><Animation Name="Commands.Show" Type="Show" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="-600,0,0" Interpolation="SCurve, 1.0"/><PositionKeyframe Time="1.0" Value="0,0,0" RelativeTo="Final"/><AlphaKeyframe Time="0.0" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="1.0" Value="1" RelativeTo="Final" /></Keyframes></Animation><Animation Name="Commands.Hide" Type="Hide" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><PositionKeyframe Time="1.5" Value="-600,0,0" RelativeTo="Final"/><AlphaKeyframe Time="0.0" Value="1" RelativeTo="Current" /><AlphaKeyframe Time="1.0" Value="0" RelativeTo="Final" /></Keyframes></Animation><Animation Name="AlbumCover.Show" Type="Show" Intensity="Intensive"><Keyframes><ScaleKeyframe Time="0.0" Value="0.0, 0.0, 0.0" RelativeTo="Absolute"/><ScaleKeyframe Time="0.7" Value="0.70, 0.70, 0" RelativeTo="Absolute" Interpolation="EaseIn, 1.0, 0.75"/><ScaleKeyframe Time="2.6" Value="0.76, 0.76, 0" RelativeTo="Absolute" Interpolation="EaseIn, 0.25, 0.75"/><AlphaKeyframe Time="0.0" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="0.7" Value="1" RelativeTo="Final" /></Keyframes></Animation><Animation Name="AlbumCoverTransition.Scale" Type="Scale" Intensity="Intensive"><Keyframes><ScaleKeyframe Time="0.0" Value="1.0, 1.0, 0" RelativeTo="Current" Interpolation="SCurve"/><ScaleKeyframe Time="0.5" Value="0.25, 0.25, 0" RelativeTo="Current" Interpolation="SCurve" /><ScaleKeyframe Time="1.0" Value="0.95, 0.95, 0" RelativeTo="Final" Interpolation="EaseOut,0.5, 0.75" /><ScaleKeyframe Time="2.5" Value="1.0, 1.0, 0" RelativeTo="Final" /></Keyframes></Animation><Animation Name="NowPlaying.Move.GDI" Type="Move"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><PositionKeyframe Time="1.5" RelativeTo="Final"/></Keyframes></Animation><Animation Name="NowPlaying.Move" Type="Move" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><PositionKeyframe Time="1.5" RelativeTo="Final" /><ScaleKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve, 1.5"/><ScaleKeyframe Time="1.5" RelativeTo="Final"/></Keyframes></Animation><Animation Name="AlbumDetails.Show" Type="Show" Intensity="Intensive"><Keyframes><PositionKeyframe Time="0.0" Value="-200,0,0" Interpolation="SCurve, 1.0"/><PositionKeyframe Time="1.0" Value="-10,0,0" RelativeTo="Final" Interpolation="EaseIn, 0.25, 0.75"/><PositionKeyframe Time="2.6" Value="0,0,0" RelativeTo="Final" Interpolation="EaseIn, 0.25, 0.75"/><ScaleKeyframe Time="0.0" Value="0.97, 0.97, 0.97" RelativeTo="Final"/><ScaleKeyframe Time="1.0" Value="0.97, 0.97, 0.97" RelativeTo="Final"/><ScaleKeyframe Time="2.6" Value="1.0, 1.0, 1.0" RelativeTo="Final" Interpolation="EaseIn, 0.25, 0.75"/><AlphaKeyframe Time="0.0" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="0.3" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="1.0" Value="1" RelativeTo="Final" Interpolation="Cosine" /></Keyframes></Animation><Animation Name="AlbumDetails.Move" Type="Move"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="EaseIn,0.25, 0.75"/><PositionKeyframe Time="1.5" RelativeTo="Final"/><AlphaKeyframe Time="0.0" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="0.8" Value="0" RelativeTo="Current" /><AlphaKeyframe Time="1.2" Value=".2" RelativeTo="Current" Interpolation="SCurve, .5" /><AlphaKeyframe Time="1.5" Value="1" RelativeTo="Final" /></Keyframes></Animation></Mcml>