<Mcml xmlns ="http://schemas.microsoft.com/2006/mcml" xmlns:cor ="assembly://MSCorLib/System" xmlns:draw ="assembly://Microsoft.MediaCenter.UI/Microsoft.MediaCenter.UI.Drawing" xmlns:shell ="assembly://Microsoft.MediaCenter.Shell/Microsoft.MediaCenter.Shell" xmlns:ext ="assembly://ehshell/Microsoft.MediaCenter.Shell.Extensions" xmlns:audio ="assembly://ehshell/MediaCenter.Audio" xmlns:media ="assembly://ehshell/MediaCenter.Media" xmlns:playback="assembly://ehshell/Microsoft.MediaCenter.Playback" xmlns:sb ="assembly://ehshell/ServiceBus.UIFramework" xmlns:comm ="res://Microsoft.MediaCenter.Shell!Globals.mcml" xmlns:ctl ="res://Microsoft.MediaCenter.Shell!Controls.mcml" xmlns:focus ="res://Microsoft.MediaCenter.Shell!FocusAnimation.mcml" xmlns:me ="Me"><Image Name="PipSelector" Source="res://ehres!Selector.png" NineGrid="9, 9, 9, 9"/><Image Name="PipShadow" Source="res://ehres!Browse.GalleryItemShadow.png" NineGrid="48, 34, 47, 61" Flippable="true"/><Aggregate Source="res://ehres!audio.AddToQueue.xml"/><Aggregate Source="res://ehres!PlayStateView.mcml"/><UI Name="MusicNowPlayingInsetBase"><Properties><playback:MediaNavigator Name="MediaNavigator" playback:MediaNavigator="$Required"/></Properties></UI><UI Name="AudioNowPlayingInset" BaseUI="me:MusicNowPlayingInsetBase"><Locals><playback:MediaMonitor Name="MediaMonitor"/></Locals><Properties><Color Name="BorderColor" Color="color://comm:Transparent"/><Color Name="FocusBorderColor" Color="color://comm:Transparent"/><MetadataVisibility Name="ShowFullMetadata" MetadataVisibility="Never"/><PipVisualState Name="VisualState" PipVisualState="Active"/><Font Name="PrimaryFont" FontName="global://comm:MainFontFace" FontSize="22"/><Font Name="SecondaryFont" FontName="global://comm:RegularFontFace" FontSize="18"/><Color Name="PrimaryColor" Color="color://comm:OffWhite"/><Color Name="SecondaryColor" Color="color://comm:LightBlue"/><AnchorLayoutInput Name="FocusLayout" Right="Parent, 0, 164" Top="Parent, 0, -29"/><AnchorLayoutInput Name="playstateLayout" Right="Parent, 0, 210" Top="Parent, 0, -40"/><AnchorLayoutInput Name="queueLayout" Right="Parent, 0, 222" Top="Parent, 0, -52"/><Vector3 Name="FocusScale" Vector3="1.333, 1.333, 1.0"/><Inset Name="InactiveMargin" Inset="29, -10, -29, 10"/><Vector3 Name="InactiveScale" Vector3="0.9, 0.9, 1.0"/><cor:Single Name="InactiveAlpha" Single="0.5"/></Properties><Rules><Binding Source="[MediaNavigator]" Target="[MediaMonitor.MediaNavigator]" /><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><IsValid Source="[MediaMonitor.MediaItemTitle]"/></Conditions><Actions><Set Target="[ClickFrameButton.AccessibilityName]" Value="[MediaMonitor.MediaItemTitle]"><Transformer><FormatTransformer Format="res://ehres!Acc_Name_AudioNowPlaying_Title"/></Transformer></Set></Actions></Rule><Default Target="[ClickFrameButton.AccessibilityName]" Value="res://ehres!Acc_Name_AudioNowPlaying"/><Default Target="[Accessible.Role]" Value="Pane"/><Rule><Conditions><Equality Source="[ShowFullMetadata]" Value="Always"/></Conditions><Actions><Set Target="[NowPlayingInformation.Visible]" Value="true"/></Actions></Rule><Condition Source="[Input.DeepKeyFocus]" SourceValue="true"><Actions><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Playstate.GainFocus.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[queueImage.LayoutInput]" Value="[queueLayout]"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.GainFocus.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.GainFocus.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Visual.LayoutInput]" Value="[FocusLayout]"/><Set Target="[Visual.Scale]" Value="[FocusScale]"/><Set Target="[Selector.Visible]" Value="true"/><Set Target="[Shadow.Visible]" Value="true"/><Set Target="[SolidBorder.Content]" Value="[FocusBorderColor]"/></Actions></Condition><Condition Source="[Input.DeepKeyFocus]" SourceValue="false"><Actions><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Playstate.LoseFocus.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.LoseFocus.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.LoseFocus.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Condition><Binding Source="[FocusBorderColor]" Target="[SolidBorder.Content]"><Conditions><Equality Source="[Input.DeepKeyFocus]" Value="true"/></Conditions></Binding><Binding Source="[BorderColor]" Target="[SolidBorder.Content]"><Conditions><Equality Source="[Input.DeepKeyFocus]" Value="false"/></Conditions></Binding><Condition Source="[VisualState]" SourceValue="Active"><Actions><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Condition><Condition Source="[VisualState]" SourceValue="Inactive"><Actions><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[queueImage.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[queueImage.Margins]" Value="[InactiveMargin]"/><Set Target="[queueImage.Scale]" Value="[InactiveScale]"/><Set Target="[queueImage.Alpha]" Value="[InactiveAlpha]"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Move" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Scale" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Visual.AttachAnimation]" animation="animation://comm:Pip.Panel.Inactive.Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Visual.Margins]" Value="[InactiveMargin]"/><Set Target="[Visual.Scale]" Value="[InactiveScale]"/><Set Target="[Visual.Alpha]" Value="[InactiveAlpha]"/></Actions></Condition><Rule><Conditions><Equality Source="[Input.DeepKeyFocus]" Value="true"/><Equality Source="[ShowFullMetadata]" ConditionOp="NotEquals" Value="Never"/></Conditions><Actions><Set Target="[NowPlayingInformation.Visible]" Value="true"/><Set Target="[NowPlayingInformation.Margins]" Value="30, 0, 0, 0"/></Actions></Rule><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[MediaNavigator.ResolvedMediaItem.Title]"/><IsValid Source="[MediaNavigator.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]"/></Conditions><Actions><Set Target="[ClickFrameButton.IconImage]" Value="[MediaNavigator.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]"/></Actions></Rule><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><IsValid Source="[MediaMonitor.AlbumCover]"/></Conditions><Actions><Set Target="[ClickFrameButton.IconImage]" Value="[MediaMonitor.AlbumCover]"/></Actions></Rule><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:AudioMediaModelItem"/><IsValid Source="[MediaNavigator.ResolvedMediaItem.Title]"/><Modified Source="[MediaNavigator.ResolvedMediaItem!sb:AudioMediaModelItem.AlbumCover]" InitialEvaluate="true"/><Equality Source="[MediaNavigator.ResolvedMediaItem!sb:AudioMediaModelItem.IsDefaultAlbumCoverImage]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[MusicalNoteOverlay.Visible]" Value="true" ExclusiveApply="true" /></Actions></Rule><Rule><Conditions><IsValid Source="[MediaMonitor]"/><IsValid Source="[MediaMonitor.AlbumCover]"/><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:MusicMediaItem"/><Modified Source="[MediaMonitor.AlbumCover]" InitialEvaluate="true"/><Equality Source="[MediaMonitor.IsDefaultAlbumCoverImage]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[MusicalNoteOverlay.Visible]" Value="true" ExclusiveApply="true" /></Actions></Rule><Default Target="[MusicalNoteOverlay.Visible]" Value="false" /><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><IsValid Source="[MediaNavigator.ResolvedMediaItem!sb:IMusicItemMetadata.Artist]"/></Conditions><Actions><Set Target="[ArtistTitle.Content]" Value="[MediaNavigator.ResolvedMediaItem!sb:IMusicItemMetadata.Artist]"/></Actions></Rule><Rule><Conditions><IsType Source="[MediaNavigator.ResolvedMediaItem]" Type="sb:IMusicItemMetadata"/><IsValid Source="[MediaMonitor.MediaItemTitle]"/><Modified Source="[MediaMonitor.MediaItemTitle]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[TrackTitle.Content]" Value="[MediaMonitor.MediaItemTitle]"/></Actions></Rule><Default Target="[ClickFrameButton.IconErrorImage]" Value="null"/><Default Target="[ClickFrameButton.IconAcquiringImage]" Value="null"/><Default Target="[ClickFrameButton.IconImage]" Value="null"/></Rules><Content><Panel><Layout><AnchorLayout SizeToHorizontalChildren="false" SizeToVerticalChildren="false"/></Layout><Children><Panel Name="PipPanel"><Layout><AnchorLayout SizeToHorizontalChildren="false" SizeToVerticalChildren="false"/></Layout><LayoutInput><AnchorLayoutInput Left="Parent, 0" Top="Parent, 0"/></LayoutInput><Children><me:AddToQueue Name="queueImage" Model="[MediaNavigator.Model!sb:AudioShimModel]" Margins="0, 0, 0 ,0" Alpha="1.0" Scale="0.66, 0.66, 1.0" CenterPointPercent="0.5, 0.5, 0.0" TraceLayout="true"><LayoutInput><AnchorLayoutInput Right="Visual, 1, 40" Bottom="Visual, 1, 40" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></me:AddToQueue><Panel Name="Visual" Layout="Anchor" Alpha="1.0" Scale="1.0, 1.0, 1.0" Margins="0, 0, 0 ,0" CenterPointPercent="0.5, 0.5, 0.0"><LayoutInput><AnchorLayoutInput Left="Parent, 0" Top="Parent, 0"/></LayoutInput><Children><Graphic Name="MusicalNoteOverlay" Content="res://ehres!Browse.Audio.NoImage.png" ><LayoutInput><AnchorLayoutInput Left="ClickFrameButton, 0" Right="ClickFrameButton, 1" Top="ClickFrameButton, 0" Bottom="ClickFrameButton, 1" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></Graphic><ctl:Button Name="ClickFrameButton" TileSize="118, 118" ShowLabel="false" FocusImage="null" FocusOverlayImage="null" PressedImage="null"><LayoutInput><AnchorLayoutInput Left="Parent, 0" Top="Parent, 0"/></LayoutInput><Model><InvokeCommand Target="[MediaNavigator.Model!sb:AudioShimModel.GoToFullScreen]"/></Model></ctl:Button><ColorFill Name="SolidBorder" Content="[BorderColor]"><LayoutInput><AnchorLayoutInput Left="ClickFrameButton, 0, -4" Right="ClickFrameButton, 1, 4" Top="ClickFrameButton, 0, -4" Bottom="ClickFrameButton, 1, 4" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></ColorFill></Children></Panel><Graphic Name="Selector" Image="image://me:PipSelector" SizingPolicy="SizeToConstraint" Visible="false" Scale="[FocusScale]"><LayoutInput><AnchorLayoutInput Left="Visual, 0, -4" Top="Visual, 0, -4" Right="Visual, 1, 4" Bottom="Visual, 1, 4" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="animation://comm:Pip.Selector.Show"/><Animation Animation="animation://comm:Pip.Selector.Hide"/></Animations><Children><focus:SelectorFocusLoop><LayoutInput><AnchorLayoutInput Left="Parent, 0" Right="Parent, 1" Top="Parent, 0" Bottom="Parent, 1" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></focus:SelectorFocusLoop></Children></Graphic><Graphic Name="Shadow" Image="image://me:PipShadow" Visible="false" SizingPolicy="SizeToConstraint" Scale="[FocusScale]" CenterPointPercent="0.5, 0.5, 0.0"><LayoutInput><AnchorLayoutInput Left="Visual, 0" Right="Visual, 1, 48" Top="Visual, 0" Bottom="Visual, 1, 46" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="animation://comm:Pip.Shadow.Show"/><Animation Animation="animation://comm:Pip.Shadow.Hide"/></Animations></Graphic><Panel Name="NowPlayingInformation" Visible="false"><Layout><FlowLayout Orientation="Vertical"/></Layout><LayoutInput><AnchorLayoutInput Left="Visual, 1, 20" Top="Visual, 0" Bottom="Visual, 1" Vertical="Center"/></LayoutInput><Children><Text Name="TrackTitle" Font="[PrimaryFont]" Color="[PrimaryColor]"><Animations><TransformAnimation Delay="0.3" Source="animation://comm:Details.Upper.Show"/><Animation Animation="animation://comm:Details.Upper.Hide"/><Animation Animation="animation://comm:Details.Upper.ShowChange"/><Animation Animation="animation://comm:Details.Upper.HideChange"/></Animations></Text><Text Name="ArtistTitle" Font="[SecondaryFont]" Color="[SecondaryColor]"><Animations><TransformAnimation Delay="0.3" Source="animation://comm:Details.Lower.Show"/><Animation Animation="animation://comm:Details.Lower.Hide"/><Animation Animation="animation://comm:Details.Lower.ShowChange"/><Animation Animation="animation://comm:Details.Lower.HideChange"/></Animations></Text></Children></Panel></Children></Panel></Children></Panel></Content></UI></Mcml>