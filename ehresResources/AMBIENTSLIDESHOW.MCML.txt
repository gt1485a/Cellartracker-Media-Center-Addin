<Mcml xmlns = "http://schemas.microsoft.com/2008/mcml" xmlns:cor = "assembly://MsCorLib/System" xmlns:col = "assembly://MsCorLib/System.Collections" xmlns:comm="res://Microsoft.MediaCenter.Shell!Globals.mcml" xmlns:pvs = "assembly://ehshell/MediaCenter.PhotosVideosShared" xmlns:ss = "res://ehres!Slideshow.mcml" xmlns:shl ="assembly://Microsoft.MediaCenter.Shell/Microsoft.MediaCenter.Shell" xmlns:me = "Me"><Animation Type="Move" Name="VertAnimZoomedIn"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve"/><PositionKeyframe Time="4.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="VertAnimZoomedInGdi"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve"/><PositionKeyframe Time="3.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="VertAnimZoomedOut"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current"/><PositionKeyframe Time="4.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="VertAnimZoomedOut2In"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve"/><PositionKeyframe Time="8.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="HorzAnimZoomedIn"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve" /><PositionKeyframe Time="4.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="HorzAnimZoomedInGdi"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve" /><PositionKeyframe Time="3.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="HorzAnimZoomedOut"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve" /><PositionKeyframe Time="4.0" RelativeTo="Final"/></Keyframes></Animation><Animation Type="Move" Name="HorzAnimZoomedOut2In"><Keyframes><PositionKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve"/><PositionKeyframe Time="8.0" RelativeTo="Final"/></Keyframes></Animation><Animation Name="LoadingAnimation"><Keyframes><ScaleKeyframe Time="0.0" Value="1.2,1.2,0" /><ScaleKeyframe Time="0.5" Value="1,1,0" /></Keyframes></Animation><UI Name="AmbientSlideshowPage"><Properties><shl:PageState Name="PageState" PageState="$Required"/><pvs:AmbientSlideshowPage Name="AmbientSSPage" AmbientSlideshowPage="$Required" /><pvs:SongInfo Name="SongInfo" SongInfo="$Required" /><ArrayListDataSet Name="DefaultMainDataSource"><Source><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /></Source></ArrayListDataSet></Properties><Locals><cor:Random Name="Random"/><BooleanChoice Name="IsInitialZoomedInModeSet" Value="false" /><BooleanChoice Name="ZoomedInMode" Value="false" /><BooleanChoice Name="ColorMode" Value="false" /><BooleanChoice Name="ZoomedInAniDone" Value="false" /><BooleanChoice Name="ZoomedOutAniDone" Value="false" /><BooleanChoice Name="ReadyForZoom" Value="false" /><BooleanChoice Name="ReadyForZoomOutAnim" Value="false" /><ScrollingData Name="VerticalScrollData" LockedPosition="0.5" /><ScrollingLayout Name="VerticalScrollLayout" Orientation="Vertical" Prefetch="0.0" PreferredAreaOfInterest="SelectedItem"/><ScrollingData Name="HorizontalScrollData" LockedPosition="0.5" /><ScrollingLayout Name="HorizontalScrollLayout" Orientation="horizontal" Prefetch="0.0" PreferredAreaOfInterest="SelectedItem"/><IntRangedValue Name="SelectedRowIndex" Value="0" /><IntRangedValue Name="SelectedColIndex" Value="4" /><IntRangedValue Name="SelectedSourceIndex" Value="0" /><Timer Name="TimerForInitialization" Interval="10" Enabled="true" AutoRepeat="true" /><Timer Name="TimerForZoom" Interval="10000" Enabled="false" /><Timer Name="TimerForZoomedOutAni" Interval="2300" Enabled="false" /><Timer Name="TimerForZoomedInAni" Interval="4000" Enabled="false" /><Timer Name="TimerForZoomedOutAniDelay" Interval="6000" Enabled="false" AutoRepeat="false" /><cor:Int32 Name="TickCounterZoom" Int32="0" /><cor:Int32 Name="TickCounterZoomOutAni" Int32="0" /><cor:Int32 Name="TickCounterZoomInAni" Int32="0" /><cor:Int32 Name="SceneZoomInAni" Int32="0" /><cor:Int32 Name="RowMovementOffset" Int32="0" /><cor:Int32 Name="ColMovementOffset" Int32="0" /><cor:Int32 Name="RandomNumber" Int32="0" /><MathTransformer Name="ModDivider" Mod="8"/><MathTransformer Name="IntAdderRow" /><MathTransformer Name="IntAdderCol" /><BooleanChoice Name="EmbeddedSSMode" Value="false" /><IntRangedValue Name="EmbeddedModeIndex" Value="-1" /><cor:Int32 Name="NumberOfFrameZoomIn" Int32="0" /><BooleanChoice Name="IsAvailableForEmbedded" Value="false" /><BooleanChoice Name="ReadyForEmbeddedSSMode" Value="false" /><pvs:AmbientSlideshowItem Name="AmbientSSItem" AmbientSlideshowItem="null" /><cor:Object Name="Result" /><BooleanChoice Name="Is2DAnimation" Value="false" /><Environment Name="Environment"/><cor:String Name="ACC_CurrentPicPath" String="none" /></Locals><Rules><Default Target="[Input.KeyInteractive]" Value="true" /><Default Target="[PageState.RespectOverscanMargins]" Value="false" /><Binding Target="[Is2DAnimation.Value]" Source="[Environment.Is2DAnimationExperience]"/><Default Target="[Accessible.Name]" Value="NewSlideShow_ZoomedInMode" /><Default Target="[Accessible.Role]" Value="Pane" /><Default Target="[VerticalScrollData.Repeater]" Value="[Repeater]" /><Binding Target="[VerticalScrollData.TargetViewItem]" Source="[VerticalScroller]"/><Binding Target="[HorizontalScrollData.TargetViewItem]" Source="[HorizontalScroller]"/><Binding Target="[Repeater.EssentialIndex]" Source="[SelectedRowIndex.Value]"/><Default Target="[IntAdderRow.AddInt]" Value="[RowMovementOffset]"/><Default Target="[IntAdderCol.AddInt]" Value="[ColMovementOffset]"/><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" ConditionOp="ChangedTo" Value="true"/></Conditions><Actions><Set Target="[Repeater.Scale]" Value="5,5,1" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" ConditionOp="ChangedTo" Value="false"/></Conditions><Actions><Set Target="[Repeater.Scale]" Value="1,1,1" /></Actions></Rule><Rule><Conditions><Equality Source="[IsInitialZoomedInModeSet.Value]" Value="false"/></Conditions><Actions><Set Target="[ZoomedInMode.Value]" Value="[Is2DAnimation.Value]" /><Set Target="[IsInitialZoomedInModeSet.Value]" Value="true" /></Actions></Rule><Changed Source="[TimerForInitialization.Tick]"><Conditions><Equality Source="[Is2DAnimation.Value]" Value="false"/><Equality Source="[AmbientSSPage.IsPhotoSearchComplete]" Value="true"/></Conditions><Actions><Set Target="[TimerForZoomedOutAni.Enabled]" Value="true" /><Set Target="[TimerForInitialization.Enabled]" Value="false" /><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:VertAnimZoomedOut" InvokePolicy="Synchronous"/><Invoke Target="[VerticalScroller.AttachAnimation]" animation="animation://me:HorzAnimZoomedOut" InvokePolicy="Synchronous"/></Actions></Changed><Changed Source="[TimerForInitialization.Tick]"><Conditions><Equality Source="[Is2DAnimation.Value]" Value="true"/><Equality Source="[AmbientSSPage.IsPhotoSearchComplete]" Value="true"/></Conditions><Actions><Set Target="[ZoomedInMode.Value]" Value="true" /><Set Target="[TimerForZoomedInAni.Enabled]" Value="true" /><Set Target="[TimerForInitialization.Enabled]" Value="false" /></Actions></Changed><Changed Source="[TimerForZoom.Tick]"><Actions><Set Target="[TickCounterZoom]" Value="[TickCounterZoom]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set></Actions></Changed><Rule><Conditions><Equality Source="[TickCounterZoom]" ConditionOp="ChangedTo" Value="1"/><Equality Source="[TimerForZoomedOutAni.Enabled]" Value="true"/></Conditions><Actions><Set Target="[ReadyForZoom.Value]" Value="true" /><Set Target="[TimerForZoom.Enabled]" Value="false" /></Actions></Rule><Rule><Conditions><Equality Source="[TickCounterZoom]" ConditionOp="ChangedTo" Value="11"/></Conditions><Actions><Set Target="[ReadyForZoom.Value]" Value="true" /><Set Target="[TimerForZoom.Enabled]" Value="false" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="true"/></Conditions><Actions><Set Target="[Accessible.Value]" Value="[ACC_CurrentPicPath]" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="false"/></Conditions><Actions><Set Target="[Accessible.Value]" Value="" /></Actions></Rule><Rule><Conditions><Equality Source="[ReadyForZoom.Value]" Value="true"/><Equality Source="[ZoomedInMode.Value]" Value="false"/><Equality Source="[ZoomedOutAniDone.Value]" Value="true"/></Conditions><Actions><DebugTrace Message="Zoomeed-Out ==> Zoomed-In" /><Set Target="[ReadyForZoom.Value]" Value="false" /><Set Target="[ZoomedOutAniDone.Value]" Value="false" /><Set Target="[ZoomedInAniDone.Value]" Value="false" /><Set Target="[TickCounterZoomOutAni]" Value="0" /><Set Target="[TickCounterZoomInAni]" Value="0" /><Set Target="[NumberOfFrameZoomIn]" Value="0" /><Set Target="[TimerForZoomedOutAni.Enabled]" Value="false" /><Set Target="[TimerForZoomedInAni.Enabled]" Value="true" /><Set Target="[EmbeddedSSMode.Value]" Value="false" /><Set Target="[ZoomedInMode.Value]" Value="true" /><Set Target="[TimerForZoom.Enabled]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[ReadyForZoom.Value]" Value="true"/><Equality Source="[ZoomedInMode.Value]" Value="true"/><Equality Source="[ZoomedInAniDone.Value]" Value="true"/></Conditions><Actions><DebugTrace Message="Zoomeed-In ==> Zoomed-Out" /><Set Target="[ReadyForZoom.Value]" Value="false" /><Set Target="[ZoomedOutAniDone.Value]" Value="false" /><Set Target="[ZoomedInAniDone.Value]" Value="false" /><Set Target="[TickCounterZoomInAni]" Value="0" /><Set Target="[TickCounterZoomOutAni]" Value="0" /><Set Target="[TimerForZoomedInAni.Enabled]" Value="false" /><Set Target="[Accessible.Value]" Value=""/><Set Target="[EmbeddedModeIndex.Value]" Value="-1" /><Set Target="[TickCounterZoom]" Value="0" /><Set Target="[ZoomedInMode.Value]" Value="false" /></Actions></Rule><Changed Source="[TimerForZoomedOutAni.Tick]"><Actions><Set Target="[ReadyForZoomOutAnim.Value]" Value="true" /><Set Target="[TickCounterZoomOutAni]" Value="[TickCounterZoomOutAni]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set><Invoke Target="[Random.Next]" maxValue="80" ResultTarget="[RandomNumber]" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Changed><Changed Source="[TimerForZoomedInAni.Tick]"><Actions><Set Target="[TickCounterZoomInAni]" Value="[TickCounterZoomInAni]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set><Set Target="[SceneZoomInAni]" Value="[TickCounterZoomInAni]" Transformer="[ModDivider]"/><DebugTrace Message="TimerForZoomedInAni.Tick Count={0}, Frame={1}"><Params><ObjectPath ObjectPath="[TickCounterZoomInAni]" /><ObjectPath ObjectPath="[SceneZoomInAni]" /></Params></DebugTrace></Actions></Changed><Rule><Conditions><Equality Source="[RandomNumber]" ConditionOp="GreaterThanOrEquals" Value="0"/><Equality Source="[RandomNumber]" ConditionOp="LessThan" Value="40"/></Conditions><Actions><Set Target="[RowMovementOffset]" Value="-1" /><Set Target="[ColMovementOffset]" Value="0" /></Actions></Rule><Rule><Conditions><Equality Source="[RandomNumber]" ConditionOp="GreaterThanOrEquals" Value="40"/><Equality Source="[RandomNumber]" ConditionOp="LessThan" Value="60"/></Conditions><Actions><Set Target="[RowMovementOffset]" Value="-1" /><Set Target="[ColMovementOffset]" Value="-1" /></Actions></Rule><Rule><Conditions><Equality Source="[RandomNumber]" ConditionOp="GreaterThanOrEquals" Value="60"/><Equality Source="[RandomNumber]" ConditionOp="LessThan" Value="80"/></Conditions><Actions><Set Target="[RowMovementOffset]" Value="-1" /><Set Target="[ColMovementOffset]" Value="1" /></Actions></Rule><Rule><Conditions><Equality Source="[RandomNumber]" ConditionOp="GreaterThanOrEquals" Value="80"/><Equality Source="[RandomNumber]" ConditionOp="LessThan" Value="90"/></Conditions><Actions><Set Target="[RowMovementOffset]" Value="0" /><Set Target="[ColMovementOffset]" Value="-1" /></Actions></Rule><Rule><Conditions><Equality Source="[RandomNumber]" ConditionOp="GreaterThanOrEquals" Value="90"/><Equality Source="[RandomNumber]" ConditionOp="LessThan" Value="100"/></Conditions><Actions><Set Target="[RowMovementOffset]" Value="0" /><Set Target="[ColMovementOffset]" Value="1" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedOutAni.Enabled]" Value="true"/><Equality Source="[TickCounterZoomOutAni]" Value="1"/></Conditions><Actions><DebugTrace Message="TickCounterZoomOutAni Set new focused item" /><Set Target="[TimerForZoom.Enabled]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedOutAni.Enabled]" Value="true"/><Equality Source="[TickCounterZoomOutAni]" ConditionOp="GreaterThan" Value="1"/></Conditions><Actions><Set Target="[IntAdderRow.AddInt]" Value="[RowMovementOffset]"/><Set Target="[IntAdderCol.AddInt]" Value="[ColMovementOffset]"/><Set Target="[SelectedRowIndex.Value]" Value="[SelectedRowIndex.Value]" Transformer="[IntAdderRow]" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedOutAni.Enabled]" Value="true"/><Equality Source="[ReadyForZoom.Value]" Value="true"/></Conditions><Actions><Set Target="[ZoomedOutAniDone.Value]" Value="true" /><Set Target="[TimerForZoomedOutAni.Enabled]" Value="false" /><DebugTrace Message="ZoomedOutAniDone" /></Actions></Rule><Changed Source="[SelectedSourceIndex.Value]"><Conditions><Equality Source="[AmbientSSPage.AmbientSSItems.Count]" ConditionOp="GreaterThan" Value="0"/></Conditions><Actions><Invoke Target="[AmbientSSPage.AmbientSSItems.get_Item]" index="[SelectedSourceIndex.Value]" ResultTarget="[Result]" InvokePolicy="Synchronous" /><Set Target="[AmbientSSItem]" Value="[Result!pvs:AmbientSlideshowItem]" /><Set Target="[IsAvailableForEmbedded.Value]" Value="[AmbientSSItem.IsAvailableForEmbedded]" /><Set Target="[EmbeddedSSMode.Value]" Value="false" /><Set Target="[ReadyForEmbeddedSSMode.Value]" Value="false" /><Set Target="[ACC_CurrentPicPath]" Value="[AmbientSSItem.CurImageFullPath]" /><DebugTrace Message=" " /><DebugTrace Message=" " /><DebugTrace Message=" " /><DebugTrace Message="************************** [{0}][{1}]SelectedSourceIndex Changed [{2}]-[{3}]**************************" ><Params><ObjectPath ObjectPath="[SelectedRowIndex.Value]" /><ObjectPath ObjectPath="[SelectedColIndex.Value]" /><ObjectPath ObjectPath="[SelectedSourceIndex.Value]" /><ObjectPath ObjectPath="[IsAvailableForEmbedded.Value]" /></Params></DebugTrace></Actions></Changed><Changed Source="[EmbeddedModeIndex.Value]"><Conditions><Equality Source="[AmbientSSPage.AmbientSSItems.Count]" ConditionOp="GreaterThan" Value="0"/><Equality Source="[EmbeddedModeIndex.Value]" ConditionOp="NotEquals" Value="-1"/></Conditions><Actions><Invoke Target="[AmbientSSPage.AmbientSSItems.get_Item]" index="[SelectedSourceIndex.Value]" ResultTarget="[Result]" InvokePolicy="Synchronous" /><Set Target="[AmbientSSItem]" Value="[Result!pvs:AmbientSlideshowItem]" /><Set Target="[ACC_CurrentPicPath]" Value="[AmbientSSItem.CurImageFullPath]" /><DebugTrace Message="Embedded item changed index={0}, imagepath={1}"><Params><ObjectPath ObjectPath="[SelectedRowIndex.Value]" /><ObjectPath ObjectPath="[ACC_CurrentPicPath]" /></Params></DebugTrace></Actions></Changed><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="ChangedTo" Value="1"/></Conditions><Actions><Set Target="[ReadyForZoomOutAnim.Value]" Value="false" /><Set Target="[ColorMode.Value]" Value="true" /><Set Target="[NumberOfFrameZoomIn]" Value="[NumberOfFrameZoomIn]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[SceneZoomInAni]" Value="1"/><Equality Source="[NumberOfFrameZoomIn]" ConditionOp="GreaterThanOrEquals" Value="3"/><Equality Source="[IsAvailableForEmbedded.Value]" Value="true"/></Conditions><Actions><Set Target="[ReadyForEmbeddedSSMode.Value]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[SceneZoomInAni]" Value="2"/><Equality Source="[ReadyForEmbeddedSSMode.Value]" Value="false"/></Conditions><Actions><DebugTrace Message="************************** Not Time for embedded [{0}]**************************" ><Params><ObjectPath ObjectPath="[SelectedSourceIndex.Value]" /></Params></DebugTrace><Set Target="[TickCounterZoomInAni]" Value="-1" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="ChangedTo" Value="0"/></Conditions><Actions><Set Target="[ColorMode.Value]" Value="false" /><Set Target="[SelectedRowIndex.Value]" Value="[SelectedRowIndex.Value]"><Transformer><MathTransformer SubtractInt="1" /></Transformer></Set></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[EmbeddedSSMode.Value]" Value="false"/><Equality Source="[SceneZoomInAni]" ConditionOp="ChangedTo" Value="0"/><Equality Source="[ReadyForZoom.Value]" Value="true"/></Conditions><Actions><Set Target="[ColorMode.Value]" Value="false" /><Set Target="[ZoomedInAniDone.Value]" Value="true" /><Set Target="[TimerForZoomedInAni.Enabled]" Value="false" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[SceneZoomInAni]" Value="3"/><Equality Source="[ReadyForEmbeddedSSMode.Value]" Value="true"/></Conditions><Actions><DebugTrace Message="************************** Time for embedded [{0}] - Frames=[{1}]**************************" ><Params><ObjectPath ObjectPath="[SelectedSourceIndex.Value]" /><ObjectPath ObjectPath="[NumberOfFrameZoomIn]" /></Params></DebugTrace><Set Target="[ColorMode.Value]" Value="false" /><Set Target="[NumberOfFrameZoomIn]" Value="0" /><Set Target="[EmbeddedSSMode.Value]" Value="true" /><Set Target="[EmbeddedModeIndex.Value]" Value="-1" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[EmbeddedSSMode.Value]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="Equals" Value="5"/></Conditions><Actions><Set Target="[EmbeddedSSMode.Value]" Value="true" /><Set Target="[EmbeddedModeIndex.Value]" Value="[EmbeddedModeIndex.Value]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[EmbeddedSSMode.Value]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="Equals" Value="7"/></Conditions><Actions><Set Target="[EmbeddedSSMode.Value]" Value="true" /><Set Target="[EmbeddedModeIndex.Value]" Value="[EmbeddedModeIndex.Value]"><Transformer><MathTransformer AddInt="1"/></Transformer></Set></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[EmbeddedSSMode.Value]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="ChangedTo" Value="0"/><Equality Source="[ReadyForZoom.Value]" Value="true"/></Conditions><Actions><DebugTrace Message="Zoom-in animation is done" /><Set Target="[EmbeddedSSMode.Value]" Value="false" /><Set Target="[EmbeddedModeIndex.Value]" Value="-1" /><Set Target="[ColorMode.Value]" Value="false" /><Set Target="[ZoomedInAniDone.Value]" Value="true" /><Set Target="[TimerForZoomedInAni.Enabled]" Value="false" /></Actions></Rule><Rule><Conditions><Equality Source="[TimerForZoomedInAni.Enabled]" Value="true"/><Equality Source="[EmbeddedSSMode.Value]" Value="true"/><Equality Source="[SceneZoomInAni]" ConditionOp="ChangedTo" Value="0"/></Conditions><Actions><DebugTrace Message="Embedded Slideshow is done" /><Set Target="[EmbeddedSSMode.Value]" Value="false" /><Set Target="[EmbeddedModeIndex.Value]" Value="-1" /><Set Target="[ColorMode.Value]" Value="false" /><Set Target="[SelectedRowIndex.Value]" Value="[SelectedRowIndex.Value]"><Transformer><MathTransformer SubtractInt="1" /></Transformer></Set></Actions></Rule><Rule><Conditions><IsValid Source="[SongInfo]"/><Equality Source="[SongInfo.Visible]" Value="true"/><Modified Source="[SongInfo.Visible]" InitialEvaluate="true"/></Conditions><Actions><Set Target="[SongInfoPanel.Visible]" Value="true"/></Actions></Rule><Default Target="[SongInfoPanel.Visible]" Value="false"/><Condition Source="[ZoomedInMode.Value]" ConditionOp="ChangedTo" SourceValue="false" ><Actions><Invoke Target="[TimerForZoomedOutAniDelay.Start]"/></Actions></Condition><Changed Source="[TimerForZoomedOutAniDelay.Tick]"><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:VertAnimZoomedOut" InvokePolicy="Synchronous"/><Invoke Target="[VerticalScroller.AttachAnimation]" animation="animation://me:HorzAnimZoomedOut" InvokePolicy="Synchronous"/><Invoke Target="[TimerForZoomedOutAniDelay.Stop]" /><Set Target="[TimerForZoomedOutAni.Enabled]" Value="true" /></Actions></Changed><Changed Source="[ZoomedInMode.Value]"><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:VertAnimZoomedOut2In" InvokePolicy="Synchronous" ExclusiveApply="true"/><Invoke Target="[VerticalScroller.AttachAnimation]" animation="animation://me:HorzAnimZoomedOut2In" InvokePolicy="Synchronous" ExclusiveApply="true" /></Actions></Changed><Rule><Conditions><Equality Source="[ColorMode.Value]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[Environment.Is2DAnimationExperience]" Value="false"/></Conditions><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:VertAnimZoomedIn" InvokePolicy="Synchronous"/><Invoke Target="[VerticalScroller.AttachAnimation]" animation="animation://me:HorzAnimZoomedIn" InvokePolicy="Synchronous"/></Actions></Rule><Rule><Conditions><Equality Source="[ColorMode.Value]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[Environment.Is2DAnimationExperience]" Value="true"/></Conditions><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:VertAnimZoomedInGdi" InvokePolicy="Synchronous"/><Invoke Target="[VerticalScroller.AttachAnimation]" animation="animation://me:HorzAnimZoomedInGdi" InvokePolicy="Synchronous"/></Actions></Rule></Rules><Content><ColorFill Layout="Fill" Content="16,16,16"><Children><Panel><Layout><AnchorLayout SizeToHorizontalChildren="false" SizeToVerticalChildren="false"/></Layout><Children><ss:SongInfoBar Name="SongInfoPanel" Model="[SongInfo]" Visible="false"><LayoutInput><AnchorLayoutInput Top="Parent, 0,397" Left="Parent, 0" /></LayoutInput></ss:SongInfoBar></Children></Panel><Panel Name="HorizontalScroller" Layout="[HorizontalScrollLayout]" ><Children><Panel Name="VerticalScroller" Layout="[VerticalScrollLayout]" MaximumSize="0,0" ><Animations><Animation Type="Scale" Name="AnimOut2InVert"><Keyframes><ScaleKeyframe Time="0" RelativeTo="Current" Interpolation="SCurve"/><ScaleKeyframe Time="8.0" RelativeTo="Final"/></Keyframes></Animation></Animations><Children><Repeater Name="Repeater" Scale="1,1,1" Source="[DefaultMainDataSource]" DiscardOffscreenVisuals="true" ><Layout><GridLayout Orientation="Vertical" Repeat="Always" Spacing="0,10" /></Layout><LayoutInput><FlowSizeMemoryLayoutInput/></LayoutInput><Animations><Animation Type="Scale" Name="AnimOut2InRepeater"><Keyframes><ScaleKeyframe Time="0" RelativeTo="Current" Interpolation="SCurve"/><ScaleKeyframe Time="8.0" RelativeTo="Final"/></Keyframes></Animation></Animations><Content><me:Row AmbientSSPage="[AmbientSSPage]" DataSource="[AmbientSSPage.AmbientSSItems]" ZoomedInMode="[ZoomedInMode]" ColorMode="[ColorMode]" EmbeddedSSMode="[EmbeddedSSMode]" Random="[Random]" RowIndex="[RepeatedItemIndex]" SelectedRowIndex="[SelectedRowIndex]" SelectedColIndex="[SelectedColIndex]" SelectedSourceIndex="[SelectedSourceIndex]" EmbeddedModeIndex="[EmbeddedModeIndex]" ><Animations><Animation Type="Hide"><Keyframes><AlphaKeyframe Time="0.0" Value="1" RelativeTo="Absolute"/><AlphaKeyframe Time="8.0" Value="1" RelativeTo="Absolute"/></Keyframes></Animation></Animations></me:Row></Content></Repeater></Children></Panel></Children></Panel></Children></ColorFill></Content></UI><UI Name="Row"><Properties><pvs:AmbientSlideshowPage Name="AmbientSSPage" AmbientSlideshowPage="$Required" /><col:IList Name="DataSource" IList="$Required"/><cor:Random Name="Random" Random="$Required" /><BooleanChoice Name="ZoomedInMode" BooleanChoice="$Required" /><BooleanChoice Name="ColorMode" BooleanChoice="$Required" /><BooleanChoice Name="EmbeddedSSMode" BooleanChoice="$Required" /><Index Name="RowIndex" Index="$Required" /><IntRangedValue Name="SelectedRowIndex" IntRangedValue="$Required" /><IntRangedValue Name="SelectedColIndex" IntRangedValue="$Required" /><IntRangedValue Name="SelectedSourceIndex" IntRangedValue="$Required" /><IntRangedValue Name="EmbeddedModeIndex" IntRangedValue="$Required" /><ArrayListDataSet Name="DefaultRowDataSource"><Source><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /><cor:String cor:String="1" /></Source></ArrayListDataSet></Properties><Locals><MathTransformer Name="PaddingAdder" Add="0"/><Inset Name="Padding" Inset="-20,0,0,0" /></Locals><Rules><Rule><Actions><Invoke Target="[Random.Next]" maxValue="240" ResultTarget="[PaddingAdder.AddInt]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Padding.Left]" Value="[Padding.Left]" Transformer="[PaddingAdder]" /><Set Target="[RowRepeater.Margins]" Value="[Padding]" /></Actions></Rule><Binding Target="[RowRepeater.EssentialIndex]" Source="[SelectedColIndex.Value]"/></Rules><Content><Panel Padding="5,5,5,5" MinimumSize="1800,135" MaximumSize="2000,140"><Children><Repeater Name="RowRepeater" Source="[DefaultRowDataSource]"><Layout><FlowLayout Orientation="Horizontal" Spacing="25,0"/></Layout><Content><me:Item AmbientSSPage="[AmbientSSPage]" DataSource="[DataSource]" ZoomedInMode="[ZoomedInMode]" ColorMode="[ColorMode]" EmbeddedSSMode="[EmbeddedSSMode]" Random="[Random]" RowIndex="[RowIndex]" ColIndex="[RepeatedItemIndex]" SelectedRowIndex="[SelectedRowIndex]" SelectedColIndex="[SelectedColIndex]" SelectedSourceIndex="[SelectedSourceIndex]" EmbeddedModeIndex="[EmbeddedModeIndex]" /></Content></Repeater></Children></Panel></Content></UI><UI Name="Item"><Properties><pvs:AmbientSlideshowPage Name="AmbientSSPage" AmbientSlideshowPage="$Required" /><col:IList Name="DataSource" IList="$Required" /><cor:Random Name="Random" Random="$Required" /><BooleanChoice Name="ZoomedInMode" BooleanChoice="$Required" /><BooleanChoice Name="ColorMode" BooleanChoice="$Required" /><BooleanChoice Name="EmbeddedSSMode" BooleanChoice="$Required" /><Index Name="RowIndex" Index="$Required" /><Index Name="ColIndex" Index="$Required" /><IntRangedValue Name="SelectedRowIndex" IntRangedValue="$Required" /><IntRangedValue Name="SelectedColIndex" IntRangedValue="$Required" /><IntRangedValue Name="SelectedSourceIndex" IntRangedValue="$Required" /><IntRangedValue Name="EmbeddedModeIndex" IntRangedValue="$Required" /><Image Name="PhotoBackground" Source="res://ehres!AmbientSlideshow.NoImage.png" /><Image Name="PhotoBorder" Source="res://ehres!AmbientSlideshow.OuterFrame.png" NineGrid="2,2,2,2"/><cor:Int32 Name="VerticalPadding" Int32="0"/><cor:Int32 Name="BottomPadding" Int32="0"/><Animation Name="NonFocusFade" ><Keyframes><AlphaKeyframe Time="0.0" Value="0.0" /><AlphaKeyframe Time="1.0" Value="0.0" Interpolation="SCurve"/><AlphaKeyframe Time="4.0" Value="0.55" /></Keyframes></Animation><Animation Name="NonFocusReturnFade" ><Keyframes><AlphaKeyframe Time="0.0" RelativeTo="Current" Interpolation="SCurve"/><AlphaKeyframe Time="0.5" Value="0.0" /></Keyframes></Animation><Animation Type="Hide" Name="DatePhotoTakenFadeOut"><Keyframes><AlphaKeyframe Time="0.0" Value="1.0"/><AlphaKeyframe Time="0.2" Value="0.0"/></Keyframes></Animation><Animation Name="ImageShowAnimation" Type="ContentChangeShow"><Keyframes><AlphaKeyframe Time="0.0" Value="0.0" RelativeTo="Absolute" /><AlphaKeyframe Time="1.0" Value="0.8" RelativeTo="Absolute" /><AlphaKeyframe Time="3.0" Value="1.0" RelativeTo="Absolute" /></Keyframes></Animation><Animation Name="ImageHideAnimation" Type="ContentChangeHide"><Keyframes><AlphaKeyframe Time="0.0" Value="1.0" RelativeTo="Absolute" /><AlphaKeyframe Time="2.0" Value="0.9" RelativeTo="Absolute" Interpolation="SCurve"/><AlphaKeyframe Time="3.5" Value="0.0" RelativeTo="Absolute" /></Keyframes></Animation><Animation Name="BorderShowAnimation" Type="Show"><Keyframes><AlphaKeyframe Time="0.0" Value="0.0" RelativeTo="Absolute" /><AlphaKeyframe Time="1.0" Value="0.8" RelativeTo="Absolute" /><AlphaKeyframe Time="3.0" Value="1.0" RelativeTo="Absolute" /></Keyframes></Animation><Animation Name="DateShowAnimation" Type="ContentChangeShow"><Keyframes><AlphaKeyframe Time="0.0" Value="0" Interpolation="SCurve" /><AlphaKeyframe Time="3.0" Value="1" /></Keyframes></Animation><Animation Name="DateHideAnimation" Type="ContentChangeHide"><Keyframes><AlphaKeyframe Time="0.0" Value="1" Interpolation="SCurve" /><AlphaKeyframe Time="0.2" Value="0" /></Keyframes></Animation></Properties><Locals><pvs:AmbientSlideshowItem Name="Model" AmbientSlideshowItem="null"/><cor:Int32 Name="IndexInSource" Int32="2" /><Environment Name="Environment"/><AreaOfInterestLayoutInput Name="AreaOfInterest" Id="SelectedItem" UseScaledRectangle="true" /><MathTransformer Name="PaddingLeftAdder" /><MathTransformer Name="PaddingTopAdder" /><Inset Name="Padding" Inset="-7,3,0,0" /><BooleanChoice Name="Focused" Value="false" /><cor:Object Name="Result" /><cor:String Name="ACC_CurrentPicPath" String="none" /><EditableText Name="ImageMode" Value="FilteredThumb" /><Timer Name="AlbumReplacementTimer" Enabled="false" AutoRepeat="false" /><cor:Int32 Name="DropHesitation" /><BooleanChoice Name="LoadingAniAvailable" Value="false" /><BooleanChoice Name="ShowBorder" Value="false" /></Locals><Rules><Default Target="[Accessible.Name]" Value="NewSlideShow_Item" /><Default Target="[Accessible.Role]" Value="Pane" /><Binding Target="[Accessible.Value]" Source="[ACC_CurrentPicPath]"/><Binding Target="[Accessible.IsFocused]" Source="[Focused.Value]"/><Default Target="[Input.KeyFocusOnMouseEnter]" Value="false" /><Binding Target="[Input.MakeTopmostOnFocus]" Source="[ZoomedInMode.Value]" /><Binding Target="[Image.Content]" Source="[PhotoBackground]" /><Rule><Conditions><IsValid Source="[DataSource]"/><Equality Source="[Model]" ConditionOp="Equals" Value="null" /><Equality Source="[DataSource.Count]" ConditionOp="GreaterThan" Value="0" /></Conditions><Actions><Invoke Target="[AmbientSSPage.GetRandomIndexForItem]" row="[RowIndex.Value]" col="[ColIndex.Value]" ResultTarget="[IndexInSource]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[DataSource.get_Item]" index="[IndexInSource]" ResultTarget="[Result]" InvokePolicy="Synchronous" /><Set Target="[Model]" Value="[Result!pvs:AmbientSlideshowItem]" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /></Conditions><Actions><Set Target="[ACC_CurrentPicPath]" Value="[Model.CurImageFullPath]" /></Actions></Rule><Rule><Conditions><Equality Source="[Environment.Is2DAnimationExperience]" Value="false"/><Equality Source="[RowIndex.Value]" ConditionOp="GreaterThan" Value="-4"/><Equality Source="[ZoomedInMode.Value]" Value="false" /></Conditions><Actions><Set Target="[LoadingAniAvailable.Value]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[RowIndex.Value]" Value="[SelectedRowIndex.Value]"/><Equality Source="[SelectedRowIndex.Value]" Value="[RowIndex.Value]"/><Equality Source="[ColIndex.Value]" Value="[SelectedColIndex.Value]"/><Equality Source="[SelectedColIndex.Value]" Value="[ColIndex.Value]"/></Conditions><Actions><Set Target="[Focused.Value]" Value="true"/><Set Target="[SelectedSourceIndex.Value]" Value="[IndexInSource]"/></Actions></Rule><Default Target="[Focused.Value]" Value="false" /><Rule><Conditions><Equality Source="[Focused.Value]" Value="true"/></Conditions><Actions><Invoke Target="[Item.SetLayoutInput]" oNewValue="[AreaOfInterest]" InvokePolicy="Synchronous" /></Actions></Rule><Rule><Conditions><Equality Source="[Focused.Value]" Value="false"/></Conditions><Actions><Invoke Target="[Item.SetLayoutInput]" idInput="[AreaOfInterest!ILayoutData.Data]" oNewValue="null" InvokePolicy="Synchronous" /></Actions></Rule><Rule><Actions><Invoke Target="[Random.Next]" maxValue="8" ResultTarget="[PaddingLeftAdder.AddInt]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Padding.Left]" Value="[Padding.Left]" Transformer="[PaddingLeftAdder]" /><Invoke Target="[Random.Next]" maxValue="8" ResultTarget="[PaddingTopAdder.AddInt]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Padding.Top]" Value="[Padding.Top]" Transformer="[PaddingTopAdder]" /><Set Target="[VerticalPadding]" Value="[Padding.Top]"/><Set Target="[BottomPadding]" Value="[VerticalPadding]"><Transformer><MathTransformer SubtractInt="8" Absolute="true"/></Transformer></Set><Set Target="[Padding.Bottom]" Value="[BottomPadding]" /><Set Target="[Item.Padding]" Value="[Padding]"/></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="false" /></Conditions><Actions><Set Target="[ImageMode.Value]" Value="FilteredThumb" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="false" /><Equality Source="[Focused.Value]" Value="false" /></Conditions><Actions><Set Target="[ImageMode.Value]" Value="FilteredThumb" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="false" /><Equality Source="[Focused.Value]" Value="true" /><Equality Source="[ColorMode.Value]" Value="false" /></Conditions><Actions><Set Target="[ImageMode.Value]" Value="FilteredFull" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="false" /><Equality Source="[Focused.Value]" Value="true" /><Equality Source="[ColorMode.Value]" Value="true" /></Conditions><Actions><Set Target="[ImageMode.Value]" Value="ColorFull" /><Invoke Target="[Model.BeginGettingEmbeddedImages]" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[Focused.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="true" /><Equality Source="[EmbeddedModeIndex.Value]" ConditionOp="GreaterThanOrEquals" Value="-1"/></Conditions><Actions><DebugTrace Message="ImageMode set to Embedded" /><Set Target="[ImageMode.Value]" Value="Embedded" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[Focused.Value]" ConditionOp="ChangedTo" Value="false" /></Conditions><Actions><Invoke Target="[Model.DisposeFilteredFullImage]" /><Invoke Target="[Model.DisposeColorFullImage]" /><Invoke Target="[Model.DisposeEmbeddedImages]" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ZoomedInMode.Value]" ConditionOp="ChangedTo" Value="false"/></Conditions><Actions><Invoke Target="[Model.DisposeFilteredFullImage]" /><Invoke Target="[Model.DisposeColorFullImage]" /><Invoke Target="[Model.DisposeEmbeddedImages]" /><PlayAnimation Target="[DatePanel]" Animation="[DatePhotoTakenFadeOut]" /></Actions></Rule><Rule><Conditions><Modified Source="[ImageMode.Value]" /><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /></Conditions><Actions><DebugTrace Message="ImageMode.Value={0} Row={1}, Col={2}, SelectedRow={3}, SelectedCol={4}, IndexInSource={5}, Path={6}"><Params><ObjectPath ObjectPath="[ImageMode.Value]" /><ObjectPath ObjectPath="[RowIndex.Value]" /><ObjectPath ObjectPath="[ColIndex.Value]" /><ObjectPath ObjectPath="[SelectedRowIndex.Value]" /><ObjectPath ObjectPath="[SelectedColIndex.Value]" /><ObjectPath ObjectPath="[IndexInSource]" /><ObjectPath ObjectPath="[Model.CurImageFullPath]" /></Params></DebugTrace></Actions></Rule><Rule><Conditions><Equality Source="[Environment.Is2DAnimationExperience]" Value="false"/><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="false" /><Equality Source="[Focused.Value]" Value="false" /><Equality Source="[ColorMode.Value]" Value="true" /></Conditions><Actions><PlayAnimation Target="[BlackMask]" Animation="[NonFocusFade]" ExclusiveApply="false" /></Actions></Rule><Rule><Conditions><Equality Source="[Environment.Is2DAnimationExperience]" Value="false"/><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="false" /><Equality Source="[Focused.Value]" Value="false" /><Equality Source="[ColorMode.Value]" Value="false" /></Conditions><Actions><PlayAnimation Target="[BlackMask]" Animation="[NonFocusReturnFade]" ExclusiveApply="false" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[Focused.Value]" Value="true" /><Equality Source="[ColorMode.Value]" Value="true" /><IsValid Source="[Model.DateTaken]"/></Conditions><Actions><Set Target="[PhotoDateTaken.Content]" Value="[Model.DateTaken]" ExclusiveApply="true" InvokePolicy="Synchronous" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ZoomedInMode.Value]" Value="true" /><Equality Source="[Focused.Value]" Value="true" /><Equality Source="[EmbeddedSSMode.Value]" Value="true" /><Equality Source="[EmbeddedModeIndex.Value]" ConditionOp="GreaterThanOrEquals" Value="-1"/><IsValid Source="[Model.DateTaken]"/></Conditions><Actions><Set Target="[PhotoDateTaken.Content]" Value="[Model.DateTaken]" ExclusiveApply="true" InvokePolicy="Synchronous" /></Actions></Rule><Rule><Conditions><Equality Source="[ZoomedInMode.Value]" Value="false" /></Conditions><Actions><Set Target="[PhotoDateTaken.Content]" Value=" " /></Actions></Rule><Rule><Conditions><Equality Source="[ShowBorder.Value]" Value="true" /></Conditions><Actions><Set Target="[PhotoBorderID1.Visible]" Value="true" /><Set Target="[PhotoBorderID2.Visible]" Value="true" /><Set Target="[PhotoBorderID3.Visible]" Value="true" /><Set Target="[PhotoBorderID4.Visible]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ImageMode.Value]" Value="FilteredThumb" /><Equality Source="[Model.FilteredThumbImage]" ConditionOp="NotEquals" Value="null" /><Equality Source="[LoadingAniAvailable.Value]" Value="true" /></Conditions><Actions><Invoke Target="[Random.Next]" minValue="0" maxValue="3000" ResultTarget="[DropHesitation]" ExclusiveApply="false" InvokePolicy="Synchronous" /><Set Target="[AlbumReplacementTimer.Interval]" Value="[DropHesitation]" InvokePolicy="Synchronous" /><Set Target="[AlbumReplacementTimer.Enabled]" Value="true" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ImageMode.Value]" Value="FilteredThumb" /><Equality Source="[Model.FilteredThumbImage]" ConditionOp="NotEquals" Value="null" /><Equality Source="[LoadingAniAvailable.Value]" Value="false" /></Conditions><Actions><Set Target="[Image.Content]" Value="[Model.FilteredThumbImage]" /><Set Target="[ShowBorder.Value]" Value="true" /></Actions></Rule><Changed Source="[AlbumReplacementTimer.Tick]" ><Actions><Set Target="[Image.Content]" Value="[Model.FilteredThumbImage]" /><Set Target="[ShowBorder.Value]" Value="true" /><Invoke Target="[Item.AttachAnimation]" animation="animation://me:LoadingAnimation" InvokePolicy="Synchronous"/></Actions></Changed><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ImageMode.Value]" Value="FilteredFull" /><Equality Source="[Model.FilteredFullImage]" ConditionOp="NotEquals" Value="null" /></Conditions><Actions><Set Target="[ShowBorder.Value]" Value="true" /><Set Target="[Image.Content]" Value="[Model.FilteredFullImage]" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ImageMode.Value]" Value="ColorFull" /><Equality Source="[Model.ColorFullImage]" ConditionOp="NotEquals" Value="null" /></Conditions><Actions><Set Target="[ShowBorder.Value]" Value="true" /><Set Target="[Image.Content]" Value="[Model.ColorFullImage]" /></Actions></Rule><Rule><Conditions><Equality Source="[Model]" ConditionOp="NotEquals" Value="null" /><Equality Source="[ImageMode.Value]" Value="Embedded" /><Equality Source="[Model.CurEmbeddedImage]" ConditionOp="NotEquals" Value="null" /><Equality Source="[EmbeddedModeIndex.Value]" ConditionOp="GreaterThanOrEquals" Value="-1"/></Conditions><Actions><Set Target="[ShowBorder.Value]" Value="true" /><Set Target="[Image.Content]" Value="[Model.CurEmbeddedImage]" /><Invoke Target="[Model.AdvanceEmbeddedImage]" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Rule><Conditions><Equality Source="[Environment.Is2DAnimationExperience]" Value="true"/></Conditions><Actions><Invoke Target="[Image.DetachAnimation]" type="ContentChangeShow" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Image.DetachAnimation]" type="ContentChangeHide" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoDateTaken.DetachAnimation]" type="ContentChangeShow" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoDateTaken.DetachAnimation]" type="ContentChangeHide" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoBorderID1.DetachAnimation]" type="Show" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoBorderID2.DetachAnimation]" type="Show" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoBorderID3.DetachAnimation]" type="Show" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[PhotoBorderID4.DetachAnimation]" type="Show" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule></Rules><Content><Panel Name="Item" MaximumSize="0,130" MinimumSize="21,130" CenterPointPercent="0.5,0.5,0.5"><Children><Panel Layout="Anchor"><Children><Panel Name="BlackMask"><LayoutInput><AnchorLayoutInput Top="Image,0,-4" Bottom="Image,1,4" Left="Image,0,-4" Right="Image,1,4" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Children><ColorFill Content="16,16,16" /></Children><Animations><Animation Type="Show"><Keyframes><AlphaKeyframe Time="0.0" Value="0" Interpolation="SCurve" /><AlphaKeyframe Time="0.1" Value="0" /></Keyframes></Animation></Animations></Panel><Panel Name="DatePanel" Padding="2,2,2,2" ><LayoutInput><AnchorLayoutInput Top="Image, 1, -4" Horizontal="Center" Bottom="Image, 1, 6" ContributesToWidth="false" ContributesToHeight="false" /></LayoutInput><Children><Text Name="PhotoDateTaken" Color="color://comm:DetailsBlack70Percent" ><Font><Font FontName="global://comm:RegularFontFace" FontSize="3" /></Font><Animations><Animation Animation="[DateShowAnimation]"/><Animation Animation="[DateHideAnimation]"/></Animations></Text></Children></Panel><Graphic Name="PhotoBorderID1" Content="[PhotoBorder]" Visible="false"><LayoutInput><AnchorLayoutInput Left="Image,0,-4" Top="Image,0,2" Right="Image,0,2" Bottom="Image,1,-2" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="[BorderShowAnimation]"/></Animations></Graphic><Graphic Name="PhotoBorderID2" Content="[PhotoBorder]" Visible="false"><LayoutInput><AnchorLayoutInput Left="Image,0,-4" Top="Image,0,-4" Right="Image,1,4" Bottom="Image,0,2" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="[BorderShowAnimation]"/></Animations></Graphic><Graphic Name="PhotoBorderID3" Content="[PhotoBorder]" Visible="false"><LayoutInput><AnchorLayoutInput Left="Image,1,-2" Top="Image,0,2" Right="Image,1,4" Bottom="Image,1,-2" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="[BorderShowAnimation]"/></Animations></Graphic><Graphic Name="PhotoBorderID4" Content="[PhotoBorder]" Visible="false"><LayoutInput><AnchorLayoutInput Left="Image,0,-4" Top="Image,1,-2" Right="Image,1,4" Bottom="Image,1,4" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="[BorderShowAnimation]"/></Animations></Graphic><Graphic Name="Image" MinimumSize="0,110" MaintainAspectRatio="true" Margins="2,2,2,2" Padding="2,2,2,2"><Animations><Animation Animation="[ImageShowAnimation]"/><Animation Animation="[ImageHideAnimation]"/></Animations></Graphic></Children></Panel></Children></Panel></Content></UI></Mcml>