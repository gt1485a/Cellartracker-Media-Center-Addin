<Mcml xmlns ="http://schemas.microsoft.com/2006/mcml" xmlns:cor ="assembly://MsCorLib/System" xmlns:coll ="assembly://MsCorLib/System.Collections" xmlns:shell ="assembly://Microsoft.MediaCenter.Shell/Microsoft.MediaCenter.Shell" xmlns:input ="assembly://Microsoft.MediaCenter.UI/Microsoft.MediaCenter.UI.Input" xmlns:ui ="assembly://Microsoft.MediaCenter.UI/Microsoft.MediaCenter.UI" xmlns:comm ="res://Microsoft.MediaCenter.Shell!Globals.mcml" xmlns:ctl ="res://Microsoft.MediaCenter.Shell!Controls.mcml" xmlns:shared="assembly://ehshell/MediaCenter.XPShared" xmlns:focus ="res://Microsoft.MediaCenter.Shell!FocusAnimation.mcml" xmlns:me ="Me"><Aggregate Source="res://Microsoft.MediaCenter.Shell!BrowseGroupedGallery.mcml"/><Aggregate Source="res://Microsoft.MediaCenter.Shell!BrowseJumpControl.mcml"/><Image Name="Browse.Selector" Source="res://ehres!Selector.png" NineGrid="9, 9, 9, 9"/><Image Name="Browse.ListViewStrip" Source="res://ehres!Browse.ListViewStrip.png" /><Image Name="Browse.ListViewStripTop" Source="res://ehres!Browse.ListViewStripTop.png" /><UI Name="Gallery"><Properties><shell:IBrowsePivot Name="Model" IBrowsePivot="$Required"/><IntRangedValue Name="SelectedIndex" IntRangedValue="$Required"/><IntRangedValue Name="TotalCount" IntRangedValue="$Required"/><IntRangedValue Name="MetaDataTopShift" IntRangedValue="$Required" /><IntRangedValue Name="GalleryContentShift" IntRangedValue="$Required" /><IntRangedValue Name="MetaDataLeftShift" IntRangedValue="$Required" /><BooleanChoice Name="LockMetaDataLeft" Value="false" /><EditableText Name="FocusArea" EditableText="$Required"/><RangedValue Name="MetadataDelay" RangedValue="$Required"/><EditableText Name="ItemMode" EditableText="$Required"/><BooleanChoice Name="IsListView" BooleanChoice="$Required" /><BooleanChoice Name="IsOneRow" BooleanChoice="$Required" /><EditableText Name="TransitionState" EditableText="$Required"/><shell:TurboScrollController Name="TurboController" TurboScrollController="null"/><IntRangedValue Name="SelectedGroup" Value="0"/><IntRangedValue Name="TotalCountOverride"/><IntRangedValue Name="ItemIndexOverride"/><BooleanChoice Name="IsPanning" /><BooleanChoice Name="IsPanningInertia" /><cor:Boolean Name="InListMaker" Boolean="false" /><Command Name="NavigateIntoContent" Command="$Required"/><cor:String Name="DefaultContentItemTemplate" String="@res://Microsoft.MediaCenter.Shell!BrowseGalleryItem.mcml#GalleryItem"/><ScrollingLayout Name="ScrollLayout" Orientation="Horizontal" Prefetch="1.5" PreferredAreaOfInterest="RepeatedItemAreaOfInterest"/><ILayout Name="FlowLayout" ILayout="global://me:GalleryDefaultLayout"/><cor:Boolean Name="ShowScrollControl" Boolean="true"/><cor:Boolean Name="DiscardOffscreenVisuals" Boolean="true"/><cor:Boolean Name="ShowGallerySelector" Boolean="true"/><cor:Boolean Name="ShowGallerySelectorRestored" Boolean="true"/><cor:Boolean Name="ShowListViewStrip" Boolean="false"/><Inset Name="GalleryPadding" Inset="0, 0, 0, 0"/><ScrollIntoViewDisposition Name="InitialScrollDisposition" LockedPosition="0.0" LockedAlignment="0.0"/><ScrollIntoViewDisposition Name="DefaultScrollDisposition" BeginPadding="0" EndPadding="370" EndPaddingRelativeTo="Near"/><ScrollIntoViewDisposition Name="MouseScrollDisposition" BeginPadding="-192" EndPadding="52" EndPaddingRelativeTo="Far"/><ScrollIntoViewDisposition Name="AutoScrollDisposition" BeginPadding="0" EndPadding="0" EndPaddingRelativeTo="Far"/><Animation Name="MoveAnimation" Animation="animation://me:Browse.Gallery.Item.Move"/><cor:Single Name="MetadataDelayTime" Single="0.133"/><cor:UInt32 Name="KeyRepeatSpeed" UInt32="100"/><cor:Int32 Name="DelayInterval" Int32="500"/><cor:Int32 Name="ScrollInterval" Int32="200"/><EditableText Name="KeyAxis" Value="none"/><AnchorEdge Name="JILVerticalAnchor" AnchorEdge="Parent, 1, 70"/><cor:Random Name="Random"/><shell:BrowseTurboScrollUtility Name="BrowseTurboUtility"/><cor:Boolean Name="GesturePanEnabled" Boolean="true"/><Animation Name="SelectorHideKeyUp" Animation="animation://me:Browse.Gallery.Selector.Hide.Key.Up"/><Animation Name="SelectorMoveKey" Animation="animation://me:Browse.Gallery.Selector.Move.Key"/></Properties><Locals><Environment Name="Environment"/><BooleanChoice Name="IsGrouped"/><cor:String Name="ContentItemTemplate" String="null"/><ScrollingData Name="ScrollData" ScrollIntoViewDisposition="[DefaultScrollDisposition]" SelectionPolicy="[Model.ContentSelectionPolicy]" ScrollStep="90"/><BooleanChoice Name="AutoScrollRegionActive"/><Timer Name="PanningTimer" AutoRepeat="false" Interval="6000" Enabled="false"/><BooleanChoice Name="ResetScrollDisposition"/><Command Name="ScrollUpCommand"/><Command Name="ScrollDownCommand"/><Command Name="PageUpCommand"/><Command Name="PageDownCommand"/><Size Name="AutoScrollSize" Size="52,0"/><shell:RepeatHelper Name="RepeatHelper"><Mappings><shell:ContentMapping Type="shell:IBrowseGroup" ContentName="GroupItem"/></Mappings></shell:RepeatHelper><RepeaterFocusHelper Name="FocusOrderHelper"/><AnchorEdge Name="TopStripTopEdge" Id="Parent" Percent="0" Offset="-140" /><AnchorEdge Name="TopStripBottomEdge" Id="Parent" Percent="0" Offset="-40" /><AnchorEdge Name="BottomStripTopEdge" Id="Parent" Percent="1" Offset="30" /><AnchorEdge Name="BottomStripBottomEdge" Id="Parent" Percent="1" Offset="130" /><JILHandler Name="JumpInListTripleTapHandler" HandlerStage="Bubbled" MaxLength="4"/><ScrollingHandler Name="ScrollingHandler" HandlerStage="Bubbled"/><shell:TurboScrollKeyHandler Name="TurboReverseKey" Key="Left" Direction="Reverse" HandlerStage="Routed"/><shell:TurboScrollKeyHandler Name="TurboForwardKey" Key="Right" Direction="Forward" HandlerStage="Routed"/><input:InputDeviceType Name="TurboInputType" InputDeviceType="None"/><shell:TurboScrollDirection Name="TurboDirection" TurboScrollDirection="Forward"/><Command Name="TurboMouseForwardCommand"/><Command Name="TurboMouseReverseCommand"/><Command Name="TurboKeyForwardCommand"/><Command Name="TurboKeyReverseCommand"/><Command Name="TurboForwardCommand"/><Command Name="TurboReverseCommand"/><Command Name="TurboStopCommand"/><Command Name="TurboStartCommand"/><shell:IBrowseTurboScrollClient Name="BrowseTurboClient" IBrowseTurboScrollClient="null"/><shell:BrowseTurboScrollMarker Name="BrowseTurboMarker" BrowseTurboScrollMarker="null"/><shell:BrowseTurboScrollGroupMarker Name="BrowseTurboGroupMarker" BrowseTurboScrollGroupMarker="null"/><shell:BrowseTurboScrollMarker Name="NextBrowseTurboMarker" BrowseTurboScrollMarker="null"/><cor:Int32 Name="TurboEndVirtualIndex" Int32="0"/><BooleanChoice Name="TurboActive"/><cor:Boolean Name="TurboNavigating"/><Timer Name="TurboTimer" Enabled="false" Interval="500" AutoRepeat="false"/><TransformAnimation Name="TurboScrollAnimation" Source="animation://me:Turbo.Scroll.Forward" Filter="Position"/><TransformAnimation Name="TurboNavigateAnimation" Source="animation://me:Turbo.Navigate.Forward" Filter="Position"/><PropertySet Name="ItemProperties"><Entries><IntRangedValue Name="SelectedIndex" IntRangedValue="[SelectedIndex]"/><IntRangedValue Name="SelectedGroup" IntRangedValue="[SelectedGroup]"/><IntRangedValue Name="MetaDataTopShift" IntRangedValue="[MetaDataTopShift]"/><IntRangedValue Name="GalleryContentShift" IntRangedValue="[GalleryContentShift]"/><IntRangedValue Name="MetaDataLeftShift" IntRangedValue="[MetaDataLeftShift]"/><BooleanChoice Name="LockMetaDataLeft" BooleanChoice="[LockMetaDataLeft]"/><IntRangedValue Name="TotalCount" IntRangedValue="[TotalCount]"/><BooleanChoice Name="IsOneRow" BooleanChoice="[IsOneRow]"/><EditableText Name="TransitionState" EditableText="[TransitionState]"/><EditableText Name="ItemMode" EditableText="[ItemMode]"/><EditableText Name="FocusArea" EditableText="[FocusArea]"/><EditableText Name="KeyAxis" EditableText="[KeyAxis]"/><cor:Boolean Name="InListMaker" Boolean="[InListMaker]"/><cor:Random Name="Random" Random="[Random]"/><BooleanChoice Name="IsPanning" BooleanChoice="[IsPanning]"/><BooleanChoice Name="IsPanningInertia" BooleanChoice="[IsPanningInertia]"/></Entries></PropertySet><PropertySet Name="GroupProperties"><Entries><IntRangedValue Name="GroupIndex" Value="0"/><IntRangedValue Name="GroupCount" Value="0"/></Entries></PropertySet><cor:Boolean Name="InitialScollDispositionNeeded" Boolean="true" /><cor:Boolean Name="ShouldAttachAnimation" Boolean="false"/><cor:Boolean Name="ValidFocusAreaForInertia" Boolean="true"/></Locals><Rules><Binding Target="[ScrollingHandler.GesturePanEnabled]" Source="[GesturePanEnabled]"/><Binding Target="[TurboReverseKey.TurboController]" Source="[TurboController]"/><Binding Target="[TurboReverseKey.StartCommand]" Source="[TurboKeyReverseCommand]"/><Binding Target="[TurboReverseKey.StopCommand]" Source="[TurboStopCommand]"/><Binding Target="[TurboReverseKey.Delay]" Source="[BrowseTurboUtility.Delay]"/><Binding Target="[TurboForwardKey.TurboController]" Source="[TurboController]"/><Binding Target="[TurboForwardKey.StartCommand]" Source="[TurboKeyForwardCommand]"/><Binding Target="[TurboForwardKey.StopCommand]" Source="[TurboStopCommand]"/><Binding Target="[TurboForwardKey.Delay]" Source="[BrowseTurboUtility.Delay]"/><Binding Target="[ReverseAutoScrollRegion.TransitionInterval]" Source="[BrowseTurboUtility.Delay]"/><Binding Target="[ForwardAutoScrollRegion.TransitionInterval]" Source="[BrowseTurboUtility.Delay]"/><Rule><Conditions><Equality Source="[Environment.IsRightToLeft]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[TurboReverseKey.Key]" Value="Right"/><Set Target="[TurboForwardKey.Key]" Value="Left"/></Actions></Rule><Binding Target="[BrowseTurboMarker]" Source="[TurboController.ChosenMarker!shell:BrowseTurboScrollMarker]"><Conditions><IsValid Source="[TurboController]"/><IsType Source="[TurboController.ChosenMarker]" Type="shell:BrowseTurboScrollMarker"/></Conditions></Binding><Default Target="[BrowseTurboMarker]" Value="null"/><Binding Target="[BrowseTurboGroupMarker]" Source="[TurboController.ChosenMarker!shell:BrowseTurboScrollGroupMarker]"><Conditions><IsValid Source="[TurboController]"/><IsType Source="[TurboController.ChosenMarker]" Type="shell:BrowseTurboScrollGroupMarker"/></Conditions></Binding><Default Target="[BrowseTurboGroupMarker]" Value="null"/><Binding Target="[NextBrowseTurboMarker]" Source="[TurboController.NextMarker!shell:BrowseTurboScrollMarker]"><Conditions><IsValid Source="[TurboController]"/><IsType Source="[TurboController.NextMarker]" Type="shell:BrowseTurboScrollMarker"/></Conditions></Binding><Default Target="[NextBrowseTurboMarker]" Value="null"/><Rule><Conditions><IsValid Source="[NextBrowseTurboMarker.Model]"/><IsType Source="[NextBrowseTurboMarker.Model]" Type="shared:IUpdateItem"/></Conditions><Actions><Invoke Target="[NextBrowseTurboMarker.Model!shared:IUpdateItem.Update]"/></Actions></Rule><Rule><Conditions><Equality Source="[ScrollingHandler.IsPanning]" ConditionOp="ChangedTo" Value="true"/></Conditions><Actions><Invoke Target="[Repeater.DetachAnimation]" type="Move" InvokePolicy="Synchronous"/><Set Target="[FocusOrderHelper.SetAreaOfInterestOnRepeatedItem]" Value="false"/><Set Target="[FocusOrderHelper.SetEssentialIndexOnRepeater]" Value="false"/><Invoke Target="[FocusOrderHelper.ClearRequestFocusIndex]" InvokePolicy="Synchronous"/><Set Target="[ShowGallerySelectorRestored]" Value="[ShowGallerySelector]"/><Set Target="[ShowGallerySelector]" Value="false"/></Actions></Rule><Rule><Conditions><Equality Source="[ScrollingHandler.IsPanning]" ConditionOp="ChangedTo" Value="false"/></Conditions><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="[MoveAnimation]" InvokePolicy="Synchronous"/><Set Target="[FocusOrderHelper.SetAreaOfInterestOnRepeatedItem]" Value="true"/><Set Target="[FocusOrderHelper.SetEssentialIndexOnRepeater]" Value="true"/><Set Target="[ShowGallerySelector]" Value="[ShowGallerySelectorRestored]"/></Actions></Rule><Binding Target="[IsPanningInertia.Value]" Source="[ScrollingHandler.IsPanningInertia]"/><Binding Target="[IsPanning.Value]" Source="[ScrollingHandler.IsPanning]"/><Changed Source="[TurboKeyReverseCommand.Invoked]"><Actions><Set Target="[TurboInputType]" Value="Keyboard"/><Invoke Target="[TurboReverseCommand.Invoke]"/></Actions></Changed><Changed Source="[TurboKeyForwardCommand.Invoked]"><Actions><Set Target="[TurboInputType]" Value="Keyboard"/><Invoke Target="[TurboForwardCommand.Invoke]"/></Actions></Changed><Changed Source="[TurboMouseReverseCommand.Invoked]"><Actions><Set Target="[TurboInputType]" Value="Mouse"/><Invoke Target="[TurboReverseCommand.Invoke]"/></Actions></Changed><Changed Source="[TurboMouseForwardCommand.Invoked]"><Actions><Set Target="[TurboInputType]" Value="Mouse"/><Invoke Target="[TurboForwardCommand.Invoke]"/></Actions></Changed><Changed Source="[TurboReverseCommand.Invoked]"><Actions><Invoke Target="[TurboStartCommand.Invoke]"/><Set Target="[TurboDirection]" Value="Reverse"/></Actions></Changed><Changed Source="[TurboForwardCommand.Invoked]"><Actions><Invoke Target="[TurboStartCommand.Invoke]"/><Set Target="[TurboDirection]" Value="Forward"/></Actions></Changed><Rule><Conditions><Modified Source="[TurboStopCommand.Invoked]"/><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[TurboController.Enabled]" Value="false"/></Actions></Rule><Rule ConditionLogicalOp="Or"><Conditions><Modified Source="[Environment.WindowActivation]"/><Modified Source="[Environment.WindowSize]"/><Modified Source="[Environment.WindowState]"/></Conditions><Actions><Invoke Target="[TurboStopCommand.Invoke]"/></Actions></Rule><Rule><Conditions><IsValid Source="[BrowseTurboClient]"/><IsValid Source="[TurboController]"/><IsValid Source="[BrowseTurboMarker.Metadata]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/></Conditions><Actions><Invoke Target="[BrowseTurboClient.LogTurboUse]" input="[TurboInputType]" itemCount="[BrowseTurboMarker.Metadata.ItemCount]"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.Hide.Key.Down" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Repeater.DetachAnimation]" type="Move" InvokePolicy="Synchronous"/><Set Target="[TurboNavigating]" Value="true"/><Set Target="[TurboTimer.Enabled]" Value="false"/><Set Target="[TransitionState.Value]" Value="TurboScrollEnabled"/><Set Target="[FocusArea.Value]" Value="TurboScrollGallery"/><Set Target="[ShowGallerySelectorRestored]" Value="[ShowGallerySelector]"/><Set Target="[ShowGallerySelector]" Value="false"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[TurboController.Direction]" ConditionOp="Equals" Value="Forward"/></Conditions><Actions><Set Target="[TurboNavigateAnimation.Magnitude]" Value="1"/><Set Target="[TurboScrollAnimation.Magnitude]" Value="1"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[TurboController.Direction]" ConditionOp="Equals" Value="Reverse"/></Conditions><Actions><Set Target="[TurboNavigateAnimation.Magnitude]" Value="-1"/><Set Target="[TurboScrollAnimation.Magnitude]" Value="-1"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[BrowseTurboUtility.BackgroundEnabled]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:Turbo.Background.Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Repeater.Alpha]" Value="0.15"/><Invoke Target="[Scroller.AttachAnimation]" animation="[TurboScrollAnimation]" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="true"/><Equality Source="[BrowseTurboUtility.BackgroundEnabled]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[Repeater.Visible]" Value="false"/></Actions></Rule><Rule><Conditions><IsValid Source="[TurboController]"/><Equality Source="[TurboController.Enabled]" ConditionOp="ChangedTo" Value="false"/></Conditions><Actions><Invoke Target="[Scroller.DetachAnimation]" type="Idle" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Repeater.DetachAnimation]" type="Alpha" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[Repeater.Visible]" Value="false"/><Set Target="[TurboTimer.Interval]" Value="100"/><Invoke Target="[TurboTimer.Start]"/></Actions></Rule><Rule><Conditions><Modified Source="[TurboTimer.Tick]"/><Equality Source="[TurboNavigating]" ConditionOp="Equals" Value="true"/><IsValid Source="[TurboController]"/><IsValid Source="[BrowseTurboMarker]"/><IsNotValid Source="[BrowseTurboGroupMarker]"/></Conditions><Actions><Invoke Target="[BrowseTurboMarker.VirtualizeItemIndex]" ResultTarget="[TurboEndVirtualIndex]" InvokePolicy="Synchronous" startVirtualItemIndex="[SelectedIndex.Value]" direction="[TurboController.Direction]"/><Invoke Target="[Repeater.NavigateIntoIndex]" index="[TurboEndVirtualIndex]"/></Actions></Rule><Rule><Conditions><Modified Source="[TurboTimer.Tick]"/><Equality Source="[TurboNavigating]" ConditionOp="Equals" Value="true"/><IsValid Source="[TurboController]"/><IsValid Source="[BrowseTurboGroupMarker]"/></Conditions><Actions><Invoke Target="[BrowseTurboGroupMarker.VirtualizeGroupIndex]" ResultTarget="[TurboEndVirtualIndex]" InvokePolicy="Synchronous" startVirtualGroupIndex="[SelectedGroup.Value]" direction="[TurboController.Direction]"/><Invoke Target="[Repeater.NavigateIntoIndex]" index="[TurboEndVirtualIndex]" indexInGroup="[BrowseTurboGroupMarker.IndexInGroup]"/></Actions></Rule><Changed Source="[TurboTimer.Tick]"><Conditions><Equality Source="[TurboNavigating]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[TurboActive.Value]" Value="false"/><Set Target="[ShowGallerySelector]" Value="[ShowGallerySelectorRestored]"/><Set Target="[TransitionState.Value]" Value="Idle"/><Set Target="[FocusArea.Value]" Value="Gallery"/></Actions></Changed><Changed Source="[TurboTimer.Tick]"><Conditions><Equality Source="[TurboNavigating]" ConditionOp="Equals" Value="false"/><IsValid Source="[TurboController]"/></Conditions><Actions><Set Target="[TurboController.Target]" Value="null" InvokePolicy="AsynchronousLowPri"/></Actions></Changed><Changed Source="[TurboTimer.Tick]"><Conditions><Equality Source="[TurboNavigating]" ConditionOp="Equals" Value="true"/></Conditions><Actions><Set Target="[TurboNavigating]" Value="false"/><Set Target="[Repeater.Visible]" Value="true"/><Set Target="[Repeater.Alpha]" Value="1.0"/><Invoke Target="[Scroller.AttachAnimation]" animation="[TurboNavigateAnimation]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Repeater.AttachAnimation]" animation="animation://me:Turbo.Navigate.Show" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[ResetScrollDisposition.Value]" Value="true"/><Set Target="[TurboTimer.Interval]" Value="500"/><Invoke Target="[TurboTimer.Start]"/></Actions></Changed><Condition Source="[TransitionState.Value]" SourceValue="NavigatingToForward"><Actions><Invoke Target="[ListViewStripTop.AttachAnimation]" animation="animation://me:Browse.Gallery.Strip.NavigateToForward" InvokePolicy="Synchronous"/><Invoke Target="[ListViewStripBottom.AttachAnimation]" animation="animation://me:Browse.Gallery.Strip.NavigateToForward" InvokePolicy="Synchronous"/></Actions></Condition><Condition Source="[TransitionState.Value]" SourceValue="NavigatingToBackward"><Actions><Invoke Target="[ListViewStripTop.AttachAnimation]" animation="animation://me:Browse.Gallery.Strip.NavigateToBackward" InvokePolicy="Synchronous"/><Invoke Target="[ListViewStripBottom.AttachAnimation]" animation="animation://me:Browse.Gallery.Strip.NavigateToBackward" InvokePolicy="Synchronous"/></Actions></Condition><Condition Source="[Environment.Is2DAnimationExperience]" SourceValue="true"><Actions><Set Target="[MoveAnimation]" Value="animation://me:Browse.Gallery.Item.Move.GDI"/></Actions></Condition><Rule ConditionLogicalOp="Or"><Conditions><Equality Source="[TransitionState.Value]" Value="Idle"/><Modified Source="[SelectedIndex.Value]"/><Modified Source="[SelectedGroup.Value]"/></Conditions><Actions><Set Target="[ShouldAttachAnimation]" Value="true"/></Actions></Rule><Default Target="[ShouldAttachAnimation]" Value="false"/><Rule><Conditions><Equality Source="[ShouldAttachAnimation]" Value="true"/><Equality Source="[ScrollingHandler.IsPanning]" Value="false"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Invoke Target="[Repeater.AttachAnimation]" animation="[MoveAnimation]" InvokePolicy="Synchronous"/></Actions></Rule><Condition Source="[TransitionState.Value]" SourceValue="NavigatingToBackward"><Actions><Invoke Target="[Repeater.DetachAnimation]" type="Move" InvokePolicy="Synchronous"/></Actions></Condition><Default Target="[Input.KeyInteractive]" Value="false" /><Default Target="[ScrollingHandler.ScrollingData]" Value="[ScrollData]"/><Default Target="[Input.KeyRepeatThreshold]" Value="[KeyRepeatSpeed]"/><Default Target="[Repeater.Source]" Value="[Model.Content]"/><Condition Source="[Model.AdditionalContentItemMappings]" ConditionOp="NotEquals" SourceValue="null"><Actions><Invoke Target="[RepeatHelper.AddMappings]" mappings="[Model.AdditionalContentItemMappings]"/></Actions></Condition><Rule><Conditions><Equality Source="[Input.DeepKeyFocus]" Value="true"/><Equality Source="[TransitionState.Value]" Value="Idle"/></Conditions><Actions><Set Target="[FocusArea.Value]" Value="Gallery"/></Actions></Rule><Rule><Conditions><Equality Source="[TransitionState.Value]" Value="NavigatingToForward"/></Conditions><Actions><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[InitialScrollDisposition]"/></Actions></Rule><Changed Source="[Model!ui:ISelectable.Selected]"><Actions><Set Target="[InitialScollDispositionNeeded]" Value="true" /></Actions></Changed><Condition ConditionOp="ChangedTo" Source="[FocusArea.Value]" SourceValue="Gallery"><Conditions><Equality Source="[InitialScollDispositionNeeded]" Value="true" /></Conditions><Actions><Set Target="[InitialScollDispositionNeeded]" Value="false" /><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[InitialScrollDisposition]"/><Set Target="[ResetScrollDisposition.Value]" Value="true" InvokePolicy="AsynchronousLowPri"/></Actions></Condition><Rule ConditionLogicalOp="Or"><Conditions><Equality Source="[FocusArea.Value]" ConditionOp="NotEquals" Value="Gallery" /><Equality Source="[Environment.IsNavigating]" Value="true"/></Conditions><Actions><Invoke Target="[JumpInListTripleTapHandler.Clear]" /></Actions></Rule><Condition Source="[Model.ContentItemTemplate]" ConditionOp="NotEquals" SourceValue="null" Target="[ContentItemTemplate]" Value="[Model.ContentItemTemplate]"/><Default Target="[ContentItemTemplate]" Value="[DefaultContentItemTemplate]"/><Changed Source="[ContentItemTemplate]"><Actions><Invoke Target="[Repeater.ForceRefresh]"/></Actions></Changed><Rule><Conditions><IsType Source="[Model]" Type="shell:IBrowseContentUnderlay"/><IsValid Source="[Model!shell:IBrowseContentUnderlay.ContentUnderlayTemplate]"/></Conditions><Actions><Set Target="[ContentUnderlay.Model]" Value="[Model]"/><Set Target="[ContentUnderlay.Source]" Value="[Model!shell:IBrowseContentUnderlay.ContentUnderlayTemplate]"/><Set Target="[ContentUnderlay.Visible]" Value="true"/></Actions></Rule><Changed Source="[PageDownCommand.Invoked]"><Actions><Invoke Target="[ScrollData.PageDown]"/></Actions></Changed><Changed Source="[PageUpCommand.Invoked]"><Actions><Invoke Target="[ScrollData.PageUp]"/></Actions></Changed><Rule><Conditions><Modified Source="[ScrollData.Scrolled]"/><Equality Source="[IsGrouped.Value]" Value="true"/></Conditions><Actions><Set Target="[SelectedIndex.Value]" Value="0"/></Actions></Rule><Rule><Conditions><Equality Source="[Environment.IsMouseActive]" Value="true"/><Equality Source="[IsPanning.Value]" Value="false"/><Equality Source="[AutoScrollRegionActive.Value]" Value="false"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[MouseScrollDisposition]"/></Actions></Rule><Rule><Conditions><Equality Source="[AutoScrollRegionActive.Value]" Value="true"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[AutoScrollDisposition.LockedPosition]" Value="[Scroller]"><Transformer><shell:CenterLockTransformer Orientation="Horizontal" InterestId="Focus"/></Transformer></Set><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[AutoScrollDisposition]"/></Actions></Rule><Condition ConditionOp="ChangedTo" Source="[IsPanning.Value]" SourceValue="false"><Actions><Set Target="[PanningTimer.Enabled]" Value="True"/></Actions></Condition><Condition ConditionOp="ChangedTo" Source="[Environment.IsMouseActive]" SourceValue="false"><Conditions><Equality Source="[IsPanning.Value]" Value="false"/></Conditions><Actions><Set Target="[ResetScrollDisposition.Value]" Value="true"/></Actions></Condition><Changed Source="[PanningTimer.Tick]"><Conditions><Equality Source="[IsPanning.Value]" Value="false"/></Conditions><Actions><Set Target="[ResetScrollDisposition.Value]" Value="true"/></Actions></Changed><Changed Source="[ResetScrollDisposition.Value]"><Conditions><Equality Source="[ResetScrollDisposition.Value]" Value="true"/><Equality Source="[LockMetaDataLeft.Value]" Value="true" /></Conditions><Actions><Set Target="[ResetScrollDisposition.Value]" Value="false"/><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[InitialScrollDisposition]"/></Actions></Changed><Changed Source="[ResetScrollDisposition.Value]"><Conditions><Equality Source="[ResetScrollDisposition.Value]" Value="true"/><Equality Source="[LockMetaDataLeft.Value]" Value="false" /></Conditions><Actions><Set Target="[ResetScrollDisposition.Value]" Value="false"/><Set Target="[ScrollData.ScrollIntoViewDisposition]" Value="[DefaultScrollDisposition]"/></Actions></Changed><Changed Source="[ScrollDownCommand.Invoked]"><Actions><Invoke Target="[ScrollData.ScrollDown]"/></Actions></Changed><Changed Source="[ScrollUpCommand.Invoked]"><Actions><Invoke Target="[ScrollData.ScrollUp]"/></Actions></Changed><Binding Source="[Scroller]" Target="[ScrollData.TargetViewItem]"/><Default Target="[ScrollData.FocusHelper]" Value="[FocusOrderHelper]"/><Rule><Conditions><Equality Source="[IsGrouped.Value]" Value="false"/><IsValid Source="[SelectedIndex.Value]"/><Equality Source="[ScrollingHandler.IsPanning]" Value="false"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[FocusOrderHelper.SetAreaOfInterestOnRepeatedItem]" Value="true"/><Set Target="[FocusOrderHelper.RequestFocusIndex]" Value="[SelectedIndex.Value]"/></Actions></Rule><Rule><Conditions><Equality Source="[IsGrouped.Value]" Value="true"/><IsValid Source="[SelectedGroup.Value]"/><Equality Source="[ScrollingHandler.IsPanning]" Value="false"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Set Target="[FocusOrderHelper.RequestFocusIndex]" Value="[SelectedGroup.Value]"/></Actions></Rule><Rule><Conditions><IsValid Source="[TotalCount.Value]"/><Equality Source="[TotalCount.Value]" Value="0" ConditionOp="GreaterThan"/><Equality Source="[ScrollingHandler.IsPanning]" Value="false"/></Conditions><Actions><Set Target="[FocusOrderHelper.SetEssentialIndexOnRepeater]" Value="true"/></Actions></Rule><Default Target="[FocusOrderHelper.SetEssentialIndexOnRepeater]" Value="false"/><Default Target="[TotalCountOverride.Value]" Value="0"/><Default Target="[ItemIndexOverride.Value]" Value="0"/><Default Target="[FocusOrderHelper.Repeater]" Value="[Repeater]"/><Default Target="[Repeater.RepeatedItem]" Value="[RepeatHelper.RepeatedHandler]"/><Default Target="[Repeater.PreRepeatHandler]" Value="[RepeatHelper.ContentTypeHandler]"/><Changed Source="[ShowListViewStrip]"><Actions><Set Target="[ListViewStripTop.Visible]" Value="[ShowListViewStrip]"/><Set Target="[ListViewStripBottom.Visible]" Value="[ShowListViewStrip]"/></Actions></Changed><Default Target="[IsListView.Value]" Value="false"/><Default Target="[MetadataDelay.Value]" Value="[MetadataDelayTime]"/><Default Target="[IsGrouped.Value]" Value="false"/><Binding Target="[BrowseTurboClient]" Source="[Model.TurboClient]"/><Rule><Conditions><Modified Source="[TurboStartCommand.Invoked]"/><Equality Source="[FocusArea.Value]" ConditionOp="Equals" Value="Gallery"/><IsValid Source="[BrowseTurboClient]"/><IsValid Source="[BrowseTurboClient.TurboTemplates]"/><IsValid Source="[TurboController]"/><Equality Source="[TurboActive.Value]" ConditionOp="Equals" Value="false"/></Conditions><Actions><Invoke Target="[BrowseTurboUtility.ConfigureBuilderOptions]" options="[BrowseTurboClient.TurboBuilderOptions]" InvokePolicy="Synchronous"/><Invoke Target="[BrowseTurboUtility.ConfigureController]" controller="[TurboController]" InvokePolicy="Synchronous"/><Invoke Target="[BrowseTurboClient.BuildTurboChoice]" ResultTarget="[TurboController.Target]" InvokePolicy="Synchronous"/><Invoke Target="[BrowseTurboUtility.SelectMarker]" target="[TurboController.Target]" indexInGroup="[SelectedIndex.Value]" groupIndex="[SelectedGroup.Value]" direction="[TurboDirection]" InvokePolicy="Synchronous"/><Invoke Target="[TurboController.Start]" direction="[TurboDirection]" ResultTarget="[TurboActive.Value]" InvokePolicy="Synchronous"/></Actions></Rule><Default Target="[Accessible.Role]" Value="List"/><Condition Source="[Environment.Is2DAnimationExperience]" SourceValue="true"><Actions><Set Target="[SelectorHideKeyUp]" Value="animation://me:Browse.Gallery.Selector.Hide.Key.Up.GDI"/><Set Target="[SelectorMoveKey]" Value="animation://me:Browse.Gallery.Selector.Move.Key.GDI"/></Actions></Condition><Rule><Conditions><Equality Source="[Environment.IsMouseActive]" Value="true"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.Hide.Mouse" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.Move.Mouse" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Rule ConditionLogicalOp="Or"><Conditions><Equality Source="[Environment.IsMouseActive]" Value="false"/><Equality Source="[TransitionState.Value]" Value="NavigatingToForward"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="[SelectorHideKeyUp]" InvokePolicy="Synchronous" ExclusiveApply="false"/><Invoke Target="[Selector.AttachAnimation]" animation="[SelectorMoveKey]" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Condition Source="[ItemMode.Value]" ConditionOp="ChangedTo" SourceValue="Press"><Actions><PlayAnimation Target="[Selector]" Animation="animation://me:Browse.Gallery.Selector.Press"/></Actions></Condition><Condition Source="[ItemMode.Value]" ConditionOp="ChangedTo" SourceValue="Release"><Actions><PlayAnimation Target="[Selector]" Animation="animation://me:Browse.Gallery.Selector.Release"/></Actions></Condition><Condition Source="[ItemMode.Value]" ConditionOp="ChangedTo" SourceValue="Select"><Actions><PlayAnimation Target="[Selector]" Animation="animation://me:Browse.Gallery.Selector.Release"/><Invoke Target="[Selector.DetachAnimation]" type="Hide" InvokePolicy="Synchronous"/></Actions></Condition><Rule><Conditions><Equality Source="[ItemMode.Value]" Value="Select"/><Equality Source="[TransitionState.Value]" Value="NavigatingAwayForward"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.NavigateAwayForward" InvokePolicy="Synchronous"/></Actions></Rule><Condition Source="[TransitionState.Value]" SourceValue="NavigatingAwayBackward"><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.NavigateAwayBackward" InvokePolicy="Synchronous"/></Actions></Condition><Rule><Conditions><Equality Source="[FocusArea.Value]" Value="Gallery"/><Equality Source="[ShowGallerySelector]" Value="true"/></Conditions><Actions><Set Target="[Selector.Visible]" Value="true"/></Actions></Rule><Rule><Conditions><Equality Source="[FocusArea.Value]" Value="PIP"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.Hide.Key.Down" InvokePolicy="Synchronous" ExclusiveApply="false"/></Actions></Rule><Rule ConditionLogicalOp="Or"><Conditions><Equality Source="[FocusArea.Value]" ConditionOp="ChangedTo" Value="Command"/><Equality Source="[FocusArea.Value]" ConditionOp="ChangedTo" Value="Pivot"/></Conditions><Actions><Invoke Target="[Selector.AttachAnimation]" animation="animation://me:Browse.Gallery.Selector.Hide.Key.Up" InvokePolicy="Synchronous" ExclusiveApply="false"/><Set Target="[ValidFocusAreaForInertia]" Value="false"/></Actions></Rule><Rule><Conditions><Equality Source="[FocusArea.Value]" ConditionOp="ChangedTo" Value="Gallery"/></Conditions><Actions><Set Target="[ValidFocusAreaForInertia]" Value="true"/></Actions></Rule><Rule><Conditions><Equality Source="[ValidFocusAreaForInertia]" Value="false"/><Equality Source="[ScrollingHandler.IsPanning]" Value="true"/></Conditions><Actions><Invoke Target="[ScrollingHandler.StopInertia]" InvokePolicy="AsynchronousNormal"/></Actions></Rule></Rules><Content><Panel Name="GalleryPanel" Padding="[GalleryPadding]"><Layout><AnchorLayout SizeToHorizontalChildren="false"/></Layout><Children><Panel TouchInteractive="true"><LayoutInput><AnchorLayoutInput Top="Parent, 0" Bottom="Parent, 1" Left="Parent, 0, -1000" Right="Parent, 1, 1000" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></Panel><Graphic Name="ListViewStripTop" Content="image://me:Browse.ListViewStripTop" Visible="false"><LayoutInput><AnchorLayoutInput Left="Parent, 0, -224" Top="[TopStripTopEdge]" Right="Parent, 1" Bottom="[TopStripBottomEdge]" ContributesToHeight="false" ContributesToWidth="false" /></LayoutInput><Animations><Animation Animation="animation://me:Browse.Gallery.Strip.NavigateAway"/></Animations></Graphic><Graphic Name="ListViewStripBottom" Content="image://me:Browse.ListViewStrip" Visible="false"><LayoutInput><AnchorLayoutInput Left="Parent, 0, -224" Top="[BottomStripTopEdge]" Right="Parent, 1" Bottom="[BottomStripBottomEdge]" ContributesToHeight="false" ContributesToWidth="false" /></LayoutInput><Animations><Animation Animation="animation://me:Browse.Gallery.Strip.NavigateAway"/></Animations></Graphic><ctl:AutoScrollRegion Name="ReverseAutoScrollRegion" ScrollData="[ScrollData]" ScrollCommand="[ScrollUpCommand]" ClickCommand="[PageUpCommand]" LayoutPosition="Left" MaximumSize="[AutoScrollSize]" AutoScrollRegionActive="[AutoScrollRegionActive]" DelayInterval="[DelayInterval]" ScrollInterval="[ScrollInterval]" RestModeEnabled="true" TransitionActive="[TurboActive]" TransitionStartCommand="[TurboMouseReverseCommand]" TransitionStopCommand="[TurboStopCommand]"><LayoutInput><AnchorLayoutInput Left="Scroller, 0, -224" ContributesToHeight="false" /></LayoutInput></ctl:AutoScrollRegion><ctl:AutoScrollRegion Name="ForwardAutoScrollRegion" ScrollData="[ScrollData]" ScrollCommand="[ScrollDownCommand]" ClickCommand="[PageDownCommand]" LayoutPosition="Right" MaximumSize="[AutoScrollSize]" AutoScrollRegionActive="[AutoScrollRegionActive]" DelayInterval="[DelayInterval]" ScrollInterval="[ScrollInterval]" RestModeEnabled="true" TransitionActive="[TurboActive]" TransitionStartCommand="[TurboMouseForwardCommand]" TransitionStopCommand="[TurboStopCommand]"><LayoutInput><AnchorLayoutInput Right="Parent, 1" ContributesToHeight="false"/></LayoutInput></ctl:AutoScrollRegion><Graphic Name="Selector" Image="image://me:Browse.Selector" Visible="false" SizingPolicy="SizeToConstraint" Scale="1.26, 1.26, 1.26" CenterPointPercent="0.5,0.5,0.5"><LayoutInput><AnchorLayoutInput Left="Focus, 0, -4" Right="Focus, 1, 4" Top="Focus, 0, -4" Bottom="Focus, 1, 4" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput><Animations><Animation Animation="animation://me:Browse.Gallery.Selector.Show"/></Animations><Children><focus:SelectorFocusLoop><LayoutInput><AnchorLayoutInput Left="Parent, 0" Right="Parent, 1" Top="Parent, 0" Bottom="Parent, 1" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></focus:SelectorFocusLoop></Children></Graphic><me:JumpControl JILHandler="[JumpInListTripleTapHandler]" Pivot="[Model]" FocusOrderHelper="[FocusOrderHelper]" NavigateIntoContent="[NavigateIntoContent]"><LayoutInput><AnchorLayoutInput Right="Parent, 1, -100" Bottom="[JILVerticalAnchor]" ContributesToWidth="false" ContributesToHeight="false"/></LayoutInput></me:JumpControl><Panel Name="Scroller" Layout="[ScrollLayout]"><LayoutInput><AnchorLayoutInput Horizontal="Near" Vertical="Near"/></LayoutInput><Children><Repeater Name="Repeater" ContentName="Item" Layout="[FlowLayout]" DiscardOffscreenVisuals="[DiscardOffscreenVisuals]" Navigation="PreferFocusOrder,FlowVertical"><LayoutInput><FlowSizeMemoryLayoutInput/></LayoutInput></Repeater></Children></Panel><me:ContentUnderlay Name="ContentUnderlay" Model="[Model]" Layout="Fill" Visible="false"><LayoutInput><AnchorLayoutInput Left="Scroller, 0" Right="Scroller, 1" Top="Scroller, 0" Bottom="Scroller, 1"/></LayoutInput></me:ContentUnderlay></Children></Panel></Content><Content Name="Item"><me:GalleryItem Model="[RepeatedItem!ICommand]" SelectionPolicy="[Model.ContentSelectionPolicy]" Source="[ContentItemTemplate]" Index="[RepeatedItemIndex]" ItemProperties="[ItemProperties]" GroupProperties="[GroupProperties]"></me:GalleryItem></Content><Content Name="GroupItem"><me:GalleryGroup Model="[RepeatedItem!shell:IBrowseGroup]" Pivot="[Model]" ContentItemTemplate="[ContentItemTemplate]" SelectedGroup="[SelectedGroup]" SelectedIndex="[SelectedIndex]" MyIndex="[RepeatedItemIndex]" ItemProperties="[ItemProperties]"></me:GalleryGroup></Content></UI><UI Name="GroupedGallery" BaseUI="me:Gallery"><Properties><FlowLayout Name="FlowLayout" Orientation="Horizontal" Spacing="0, 0" Repeat="WhenTooBig" RepeatGap="70, 0" MissingItemPolicy="SizeToAverage" MinimumSampleSize="3" StopOnEmptyItem="true"/><cor:Boolean Name="DiscardOffscreenVisuals" Boolean="true"/></Properties><Locals><shell:GroupedGalleryRepeaterFocusHelper Name="FocusOrderHelper"/></Locals><Rules><Default Target="[IsGrouped.Value]" Value="true"/><Default Target="[FocusOrderHelper.SelectedGroup]" Value="[SelectedGroup]"/></Rules></UI><UI Name="ContentUnderlay"><Properties><shell:IBrowsePivot Name="Model" shell:IBrowsePivot="$Required"/></Properties><Content><Panel/></Content></UI><GridLayout Name="GalleryDefaultLayout" Orientation="Vertical" AllowWrap="true" Spacing="2, 2" Repeat="WhenTooBig" RepeatGap="70"/></Mcml>